"use strict";(self.webpackChunkminimal_blog=self.webpackChunkminimal_blog||[]).push([[245],{1173:function(e,n,t){t.d(n,{p:function(){return p},A:function(){return h}});var o=t(454),a=t(6540),l=t(557),r=t(6835),s=t(3328),i=t(7715),c=t(7169);var d=e=>{let{post:n}=e;return null};const u=["16px","8px","4px"].map(e=>"rgba(0, 0, 0, 0.1) 0px "+e+" "+e+" 0px");var m=e=>{let{data:{post:n},children:t}=e;return(0,l.Y)(s.A,null,(0,l.Y)(r.DZ,{as:"h1",variant:"styles.h1"},n.title),(0,l.Y)("p",{sx:{color:"secondary",mt:3,a:{color:"secondary"},fontSize:[1,1,2]}},(0,l.Y)("time",null,n.date),n.tags&&(0,l.Y)(a.Fragment,null," — ",(0,l.Y)(i.A,{tags:n.tags})),n.timeToRead&&" — ",n.timeToRead&&(0,l.Y)("span",null,n.timeToRead," min read")),(0,l.Y)("section",{sx:{my:5,".gatsby-resp-image-wrapper":{my:[4,4,5],borderRadius:"4px",boxShadow:u.join(", "),".gatsby-resp-image-image":{borderRadius:"4px"}},variant:"layout.content"}},t),(0,l.Y)(d,{post:n}))};const p=e=>{var n,t,o;let{data:{post:a}}=e;return(0,l.Y)(c.A,{title:a.title,description:a.description?a.description:a.excerpt,image:a.banner?null===(n=a.banner)||void 0===n||null===(t=n.childImageSharp)||void 0===t||null===(o=t.resize)||void 0===o?void 0:o.src:void 0,pathname:a.slug,canonicalUrl:a.canonicalUrl})};function h(e){let n=Object.assign({},((0,o.A)(e),e));return a.createElement(m,n)}},7715:function(e,n,t){var o=t(557),a=t(6540),l=t(4794),r=t(3601),s=t(2174);n.A=e=>{let{tags:n}=e;const{tagsPath:t,basePath:i}=(0,r.A)();return(0,o.Y)(a.Fragment,null,n.map((e,n)=>(0,o.Y)(a.Fragment,{key:e.slug},!!n&&", ",(0,o.Y)(l.Link,{sx:e=>{var n;return Object.assign({},null===(n=e.styles)||void 0===n?void 0:n.a)},to:(0,s.A)("/"+i+"/"+t+"/"+e.slug)},e.name))))}},7968:function(e,n,t){t.r(n),t.d(n,{Head:function(){return s.p},default:function(){return i}});var o=t(6540),a=t(8453);function l(e){const n=Object.assign({h1:"h1",p:"p",h2:"h2",pre:"pre",code:"code",hr:"hr",h3:"h3",ul:"ul",li:"li",a:"a"},(0,a.RP)(),e.components);return o.createElement(o.Fragment,null,o.createElement(n.h1,null,"Build a RESTful API with Node.js, Express and MongoDB"),"\n",o.createElement(n.p,null,"In building applications, an API (application programming interface) simplifies programming by abstracting the underlying implementation and only exposing objects or actions the developer needs. Representational state transfer (REST) is a software architectural style which uses a subset of HTTP. It is commonly used to create interactive applications that use Web services. A Web service that follows these guidelines is called RESTful. Such a Web service must provide its Web resources in a textual representation and allow them to be read and modified with a stateless protocol and a predefined set of operations. This approach allows interoperability between the computer systems on the Internet that provide these services. REST is an alternative to, for example, SOAP as way to access a Web service."),"\n",o.createElement(n.h2,null,"Overview"),"\n",o.createElement(n.p,null,"In this tutorial, we’ll be building a RESTful CRUD (Create, Retrieve, Update, Delete) API with Node.js, Express and MongoDB. We’ll use Mongoose for interacting with the MongoDB instance. Along the way, you will be able to leverage and improve your JS skills. Developers can also expand this tutorial by using MySQL instead of MongoDB or securing API by adding authentication callbacks."),"\n",o.createElement(n.h2,null,"Introduction"),"\n",o.createElement(n.p,null,"Express is one of the most popular web frameworks for node.js. It is built on top of Node.js http module, and adds support for routing, middleware, view system etc. It is very simple and minimal, unlike other frameworks that try do way to much, thereby reducing the flexibility for developers to have their own design choices."),"\n",o.createElement(n.p,null,"Mongoose is an ODM (Object Document Mapping) tool for Node.js and MongoDB. It helps you convert the objects in your code to documents in the database and vice versa."),"\n",o.createElement(n.h2,null,"The Goal"),"\n",o.createElement(n.p,null,"In this tutorial, we will be building a simple book-shelf application. We will build Rest APIs for creating, listing, editing and deleting a book."),"\n",o.createElement(n.p,null,"We’ll start by building a simple web server and then move on to configuring the database, building the book model and different routes for handling all the CRUD operations."),"\n",o.createElement(n.p,null,"Finally, we’ll test our REST APIs using Curl."),"\n",o.createElement(n.h2,null,"Before you Start"),"\n",o.createElement(n.p,null,"Install Node.js and MongoDB on your machine. Then, verify that you have Node.js, NPM and MongoDB installed on our machine. To do that, open your terminal or command prompt and run"),"\n",o.createElement(n.pre,null,o.createElement(n.code,{className:"language-sh"},"node -v\nnpm -v\nmongo --version\n")),"\n",o.createElement(n.p,null,"You also need a code editor like Visual Studio Code, Sublime Text or Notepad++;"),"\n",o.createElement(n.hr),"\n",o.createElement(n.h2,null,"Part 1 - Project Initialization"),"\n",o.createElement(n.p,null,"Create an application folder where your application will reside. To initialize the application, you need to create a ",o.createElement(n.code,null,"package.json")," file, which will hold all the metadata for the node application. The file allows npm to handle installing the package dependencies and scripts we write to handle the application.\nAssuming that you’ve Node.js installed, we can initialize the application from the command line by executing the following:"),"\n",o.createElement(n.pre,null,o.createElement(n.code,{className:"language-sh"},"npm init\n")),"\n",o.createElement(n.p,null,"Follow the wizard as below to setup your app with a ",o.createElement(n.code,null,"package.json")," file."),"\n",o.createElement(n.pre,null,o.createElement(n.code,{className:"language-json"},'package name: (nodejs-mongo-app)\nversion: (1.0.0)\ndescription: Rest API demo using node.js,express and MongoDB by Vijeth P H.\nentry point: (index.js) server.js\ntest command:\ngit repository:\nkeywords: RestAPI Express Node MongoDB Books\nauthor: vijethph\nlicense: (ISC) MIT\nAbout to write to /home/vijethph/Desktop/node-express-mongo-app/package.json:\n\n{\n  "name": "nodejs-mongo-app",\n  "version": "1.0.0",\n  "description": "Rest API demo using node,express and MongoDB by Vijeth P H.",\n  "main": "server.js",\n  "scripts": {\n    "test": "echo \\"Error: no test specified\\" && exit 1"\n  },\n  "keywords": [\n    "RestAPI",\n    "Express",\n    "Node",\n    "MongoDB",\n    "Books"\n  ],\n  "author": "vijethph",\n  "license": "MIT"\n}\n\nIs this OK? (yes) yes\n')),"\n",o.createElement(n.p,null,"At this point, you should verify that you have a ",o.createElement(n.code,null,"package.json")," file is available in your project root by listing the files with either ",o.createElement(n.code,null,"ls -l")," or ",o.createElement(n.code,null,"dir")," depending on your OS."),"\n",o.createElement(n.p,null,"We need a file that can act as command central for our application. This file will be executed first by npm when we ask it to run our application. This file can have object instances of multiple modules that we write as well as third party modules that we install from the npm directory.\nThese modules are dependencies of the project. We’ll install a few of these dependencies now:"),"\n",o.createElement(n.pre,null,o.createElement(n.code,{className:"language-sh"},"npm install express body-parser mongoose cors --save\n")),"\n",o.createElement(n.p,null,o.createElement(n.code,null,"express")," is a web framework that is used for building the REST APIs. ",o.createElement(n.code,null,"body-parser")," is a module that parses the request (of various content types) and creates a req.body object that we can access in our routes. ",o.createElement(n.code,null,"cors")," provides Express middleware to enable CORS with various options."),"\n",o.createElement(n.hr),"\n",o.createElement(n.h2,null,"Part 2 - Setting up the web server"),"\n",o.createElement(n.p,null,"Let’s now create the main entry point of our application. Create a new file named ",o.createElement(n.code,null,"server.js")," in the root folder of the application with the following contents:"),"\n",o.createElement(n.pre,null,o.createElement(n.code,{className:"language-js"},'//server.js\n\nconst express = require("express");\nconst bodyParser = require("body-parser");\nconst cors = require("cors");\n\n// create express app\nconst app = express();\n\n// create cors origin and use it\nvar corsOptions = {\n  origin: "http://localhost:8080",\n};\napp.use(cors(corsOptions));\n\n// parse requests of content-type - application/x-www-form-urlencoded\napp.use(bodyParser.urlencoded({ extended: true }));\n\n// parse requests of content-type - application/json\napp.use(bodyParser.json());\n\n// define a simple route\napp.get("/", (req, res) => {\n  res.json({ message: "Welcome to Bookshelf app!!" }).end();\n});\n\n// set port, listen for requests\nconst PORT = process.env.PORT || 8080;\napp.listen(PORT, () => {\n  console.log(`Server is running on port ${PORT}.`);\n});\n')),"\n",o.createElement(n.p,null,"Run the server with the command ",o.createElement(n.code,null,"node server.js"),". Open your web browser with URL ",o.createElement(n.code,null,"http://localhost:8080")," to see the output."),"\n",o.createElement(n.hr),"\n",o.createElement(n.h2,null,"Part 3 - Database Configuration"),"\n",o.createElement(n.p,null,"Create a new folder ",o.createElement(n.code,null,"config")," in the root folder of our application for keeping all the configurations. Create a new file ",o.createElement(n.code,null,"database.config.js")," inside ",o.createElement(n.code,null,"config")," folder with the following contents:"),"\n",o.createElement(n.pre,null,o.createElement(n.code,{className:"language-js"},'//database.config.js\n\nmodule.exports = {\n  url: "mongodb://localhost:27017/bookshelf",\n};\n')),"\n",o.createElement(n.p,null,"We’ll now import the above database configuration in ",o.createElement(n.code,null,"server.js")," and connect to the database using mongoose."),"\n",o.createElement(n.p,null,"Add the following code to the ",o.createElement(n.code,null,"server.js")," file after ",o.createElement(n.code,null,"app.use(bodyParser.json());")," line:"),"\n",o.createElement(n.pre,null,o.createElement(n.code,{className:"language-js"},'//book.model.js\n\n// Configuring the database\nconst dbConfig = require("./config/database.config.js");\nconst mongoose = require("mongoose");\n\nmongoose.Promise = global.Promise;\n\n// Connecting to the database\nmongoose\n  .connect(dbConfig.url, {\n    useNewUrlParser: true,\n  })\n  .then(() => {\n    console.log("Successfully connected to the database");\n  })\n  .catch((err) => {\n    console.log("Could not connect to the database. Exiting now...", err);\n    process.exit();\n  });\n')),"\n",o.createElement(n.p,null,"Next, we will define the book model. Create a new folder called ",o.createElement(n.code,null,"app")," inside the root folder of the application, then create another folder called ",o.createElement(n.code,null,"models")," inside the app folder.\nNow, create a file called ",o.createElement(n.code,null,"book.model.js")," inside ",o.createElement(n.code,null,"app/models")," folder with the following contents:"),"\n",o.createElement(n.pre,null,o.createElement(n.code,{className:"language-js"},'const mongoose = require("mongoose");\n\nconst BookSchema = mongoose.Schema({\n  title: String,\n  summary: String,\n});\n\nmodule.exports = mongoose.model("Book", BookSchema);\n')),"\n",o.createElement(n.p,null,"The Book model is very simple. It contains a title and a summary field. This Mongoose Model represents books collection in MongoDB database."),"\n",o.createElement(n.hr),"\n",o.createElement(n.h2,null,"Part 4 - Define the controller"),"\n",o.createElement(n.p,null,"The controller will contain methods for handling all the CRUD operations.\nCreate a new folder called ",o.createElement(n.code,null,"controllers")," inside the app folder, then create a new file called ",o.createElement(n.code,null,"book.controller.js")," inside app/controllers folder with the following contents :"),"\n",o.createElement(n.pre,null,o.createElement(n.code,{className:"language-js"},'//book.controller.js\n\nconst book = require("../models/book.model.js");\n\n// Create and Save a new book\nexports.create = (req, res) => {};\n\n// Retrieve and return all books from the database.\nexports.findAll = (req, res) => {};\n\n// Find a single book with a bookId\nexports.findOne = (req, res) => {};\n\n// Update a book identified by the bookId in the request\nexports.update = (req, res) => {};\n\n// Delete a book with the specified bookId in the request\nexports.delete = (req, res) => {};\n')),"\n",o.createElement(n.p,null,"Let us implement all of the above controller functions one by one:"),"\n",o.createElement(n.h3,null,"Creating a new book"),"\n",o.createElement(n.pre,null,o.createElement(n.code,{className:"language-js"},'// Create and Save a new book\nexports.create = (req, res) => {\n  // Validate request\n  if (!req.body.summary) {\n    return res.status(400).send({\n      message: "book summary can not be empty",\n    });\n  }\n\n  // Create a book\n  const book = new book({\n    title: req.body.title || "Untitled Book",\n    summary: req.body.summary,\n  });\n\n  // Save book in the database\n  book\n    .save()\n    .then((data) => {\n      res.send(data);\n    })\n    .catch((err) => {\n      res.status(500).send({\n        message: err.message || "Some error occurred while creating the book.",\n      });\n    });\n};\n')),"\n",o.createElement(n.h3,null,"Retrieving all books"),"\n",o.createElement(n.pre,null,o.createElement(n.code,{className:"language-js"},'// Retrieve and return all books from the database.\nexports.findAll = (req, res) => {\n  book\n    .find()\n    .then((books) => {\n      res.send(books);\n    })\n    .catch((err) => {\n      res.status(500).send({\n        message: err.message || "Some error occurred while retrieving books.",\n      });\n    });\n};\n')),"\n",o.createElement(n.h3,null,"Retrieving a single book"),"\n",o.createElement(n.pre,null,o.createElement(n.code,{className:"language-js"},'// Find a single book with a bookId\nexports.findOne = (req, res) => {\n  book\n    .findById(req.params.bookId)\n    .then((book) => {\n      if (!book) {\n        return res.status(404).send({\n          message: "book not found with id " + req.params.bookId,\n        });\n      }\n      res.send(book);\n    })\n    .catch((err) => {\n      if (err.kind === "ObjectId") {\n        return res.status(404).send({\n          message: "book not found with id " + req.params.bookId,\n        });\n      }\n      return res.status(500).send({\n        message: "Error retrieving book with id " + req.params.bookId,\n      });\n    });\n};\n')),"\n",o.createElement(n.h3,null,"Updating a book"),"\n",o.createElement(n.pre,null,o.createElement(n.code,{className:"language-js"},'// Update a book identified by the bookId in the request\nexports.update = (req, res) => {\n  // Validate Request\n  if (!req.body.summary) {\n    return res.status(400).send({\n      message: "book summary can not be empty",\n    });\n  }\n\n  // Find book and update it with the request body\n  book\n    .findByIdAndUpdate(\n      req.params.bookId,\n      {\n        title: req.body.title || "Untitled book",\n        summary: req.body.summary,\n      },\n      { new: true }\n    )\n    .then((book) => {\n      if (!book) {\n        return res.status(404).send({\n          message: "book not found with id " + req.params.bookId,\n        });\n      }\n      res.send(book);\n    })\n    .catch((err) => {\n      if (err.kind === "ObjectId") {\n        return res.status(404).send({\n          message: "book not found with id " + req.params.bookId,\n        });\n      }\n      return res.status(500).send({\n        message: "Error updating book with id " + req.params.bookId,\n      });\n    });\n};\n')),"\n",o.createElement(n.p,null,"The ",o.createElement(n.code,null,"{ new: true }")," option in the ",o.createElement(n.code,null,"findByIdAndUpdate()")," method is used to return the modified document to the ",o.createElement(n.code,null,"then()")," function instead of the original."),"\n",o.createElement(n.h3,null,"Deleting a book"),"\n",o.createElement(n.pre,null,o.createElement(n.code,{className:"language-js"},'// Delete a book with the specified bookId in the request\nexports.delete = (req, res) => {\n    book.findByIdAndRemove(req.params.bookId)\n    .then(book => {\n        if(!book) {\n            return res.status(404).send({\n                message: "book not found with id " + req.params.bookId\n            });\n        }\n        res.send({message: "book deleted successfully!"});\n    }).catch(err => {\n        if(err.kind === \'ObjectId\' || err.name === \'NotFound\') {\n            return res.status(404).send({\n                message: "book not found with id " + req.params.bookId\n            });\n        }\n        return res.status(500).send({\n            message: "Could not delete book with id " + req.params.bookId\n        });\n    });\n};\n')),"\n",o.createElement(n.h2,null,"Part 5 - Define the routes"),"\n",o.createElement(n.p,null,"When a client sends request for an endpoint using HTTP request (GET, POST, PUT, DELETE), we need to determine how the server will reponse by setting up the routes."),"\n",o.createElement(n.p,null,"Create a new folder called ",o.createElement(n.code,null,"routes")," inside the app folder.\nNow, create a new file called ",o.createElement(n.code,null,"book.routes.js")," inside ",o.createElement(n.code,null,"app/routes")," folder with the following contents:"),"\n",o.createElement(n.pre,null,o.createElement(n.code,{className:"language-js"},'//book.routes.js\n\nmodule.exports = (app) => {\n  const books = require("../controllers/book.controller.js");\n\n  // Create a new book\n  app.post("/books", books.create);\n\n  // Retrieve all books\n  app.get("/books", books.findAll);\n\n  // Retrieve a single book with bookId\n  app.get("/books/:bookId", books.findOne);\n\n  // Update a book with bookId\n  app.put("/books/:bookId", books.update);\n\n  // Delete a book with bookId\n  app.delete("/books/:bookId", books.delete);\n};\n')),"\n",o.createElement(n.p,null,"Include the routes in ",o.createElement(n.code,null,"server.js"),". Add the following require statement before ",o.createElement(n.code,null,"app.listen()")," line inside ",o.createElement(n.code,null,"server.js")," file ",o.createElement(n.code,null,"(right before app.listen())"),":"),"\n",o.createElement(n.pre,null,o.createElement(n.code,{className:"language-js"},'// Require books routes\nrequire("./app/routes/book.routes.js")(app);\n')),"\n",o.createElement(n.h2,null,"Part 6 - Test the APIs"),"\n",o.createElement(n.p,null,"Run our Node.js application with command: ",o.createElement(n.code,null,"node server.js"),".\nOpen the terminal and create a new Book with the following command:"),"\n",o.createElement(n.pre,null,o.createElement(n.code,{className:"language-bash"},'curl -X POST \\\n    -H \'content-type:application/json\' \\\n    -d \'{"title":"Sunshine","summary":"A story about weather"}\' \\\n    http://localhost:8080/books\n')),"\n",o.createElement(n.p,null,"If you do not receive any errors, you’ll see the book record for ",o.createElement(n.code,null,"Sunshine")," added into MongoDB database of ",o.createElement(n.code,null,"bookshelf")," and under collection ",o.createElement(n.code,null,"books"),". Feel free to add more records to your database. You can also perform these testing of APIs with Postman app."),"\n",o.createElement(n.p,null,"Get all Books in database with the following command:"),"\n",o.createElement(n.pre,null,o.createElement(n.code,{className:"language-bash"},"curl -X GET http://localhost:8080/books\n")),"\n",o.createElement(n.h2,null,"Conclusion"),"\n",o.createElement(n.p,null,"In this tutorial, we’ve learned how to develop a Node.js REST API and connect it with MongoDB to fetch and manipulate the data. From here, you can take different steps. For instance, you can expand this project by adding more features like data validation to it. You can also improve the API security and scalability by following Node.js best practices. Lastly, you can try this tutorial with MySQL database or another server-side coding language like PHP or ASP.NET."),"\n",o.createElement(n.h2,null,"Credits & Attributions"),"\n",o.createElement(n.ul,null,"\n",o.createElement(n.li,null,o.createElement(n.a,{href:"https://nordicapis.com/building-a-restful-api-using-node-js-and-mongodb/"},"Building a RESTful API Using Node.JS and MongoDB")," by Kaustubh Ghadge and Matt Zand"),"\n",o.createElement(n.li,null,o.createElement(n.a,{href:"https://medium.com/@dinyangetoh/how-to-build-simple-restful-api-with-nodejs-expressjs-and-mongodb-99348012925d"},"How To Build Simple RESTful API With Node.js, ExpressJs And MongoDb")," by David Inyang-Etoh"),"\n",o.createElement(n.li,null,o.createElement(n.a,{href:"https://bezkoder.com/node-express-mongodb-crud-rest-api/"},"Node.js, Express & MongoDb: Build a CRUD Rest Api example")," by Bezkoder"),"\n",o.createElement(n.li,null,o.createElement(n.a,{href:"https://www.callicoder.com/node-js-express-mongodb-restful-crud-api-tutorial/"},"Building a Restful CRUD API with Node.js, Express and MongoDB")," by Rajeev Singh"),"\n",o.createElement(n.li,null,o.createElement(n.a,{href:"https://en.wikipedia.org/wiki/Main_Page"},"Wikipedia")),"\n"))}var r=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,a.RP)(),e.components);return n?o.createElement(n,e,o.createElement(l,e)):l(e)},s=t(1173);function i(e){return o.createElement(s.A,e,o.createElement(r,e))}s.A}}]);
//# sourceMappingURL=component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-nodejs-mongo-rest-api-index-mdx-8bae368185bb42ede576.js.map