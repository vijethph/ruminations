<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 5.15.0"/><meta name="theme-color" content="#6B46C1"/><meta name="description" content="Complete guide to all things Kubernetes" data-gatsby-head="true"/><meta name="image" content="https://vijethph.github.io/ruminations/banner.jpg" data-gatsby-head="true"/><meta property="og:title" content="Kubernetes Reference | Ruminations" data-gatsby-head="true"/><meta property="og:url" content="https://vijethph.github.io/ruminations/kubernetes-reference" data-gatsby-head="true"/><meta property="og:description" content="Complete guide to all things Kubernetes" data-gatsby-head="true"/><meta property="og:image" content="https://vijethph.github.io/ruminations/banner.jpg" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:image:alt" content="Complete guide to all things Kubernetes" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta name="twitter:title" content="Kubernetes Reference | Ruminations" data-gatsby-head="true"/><meta name="twitter:url" content="https://vijethph.github.io/ruminations/kubernetes-reference" data-gatsby-head="true"/><meta name="twitter:description" content="Complete guide to all things Kubernetes" data-gatsby-head="true"/><meta name="twitter:image" content="https://vijethph.github.io/ruminations/banner.jpg" data-gatsby-head="true"/><meta name="twitter:image:alt" content="Complete guide to all things Kubernetes" data-gatsby-head="true"/><meta name="twitter:creator" content="@lekoarts_de" data-gatsby-head="true"/><meta name="gatsby-theme" content="@lekoarts/gatsby-theme-minimal-blog" data-gatsby-head="true"/><link rel="sitemap" type="application/xml" href="/ruminations/sitemap-index.xml"/><link rel="manifest" href="/ruminations/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="192x192" href="/ruminations/android-chrome-192x192.png"/><link rel="apple-touch-icon" sizes="512x512" href="/ruminations/android-chrome-512x512.png"/><link rel="alternate" type="application/rss+xml" title="Ruminations - Personal Blog of Vijeth P H" href="/ruminations/rss.xml"/><style data-emotion="css-global 6koz1s" data-gatsby-head="true">html{--theme-ui-colors-transparent:transparent;--theme-ui-colors-black:#000;--theme-ui-colors-white:#fff;--theme-ui-colors-gray-1:#f7fafc;--theme-ui-colors-gray-2:#edf2f7;--theme-ui-colors-gray-3:#e2e8f0;--theme-ui-colors-gray-4:#cbd5e0;--theme-ui-colors-gray-5:#a0aec0;--theme-ui-colors-gray-6:#718096;--theme-ui-colors-gray-7:#4a5568;--theme-ui-colors-gray-8:#2d3748;--theme-ui-colors-gray-9:#1a202c;--theme-ui-colors-red-1:#fff5f5;--theme-ui-colors-red-2:#fed7d7;--theme-ui-colors-red-3:#feb2b2;--theme-ui-colors-red-4:#fc8181;--theme-ui-colors-red-5:#f56565;--theme-ui-colors-red-6:#e53e3e;--theme-ui-colors-red-7:#c53030;--theme-ui-colors-red-8:#9b2c2c;--theme-ui-colors-red-9:#742a2a;--theme-ui-colors-orange-1:#fffaf0;--theme-ui-colors-orange-2:#feebc8;--theme-ui-colors-orange-3:#fbd38d;--theme-ui-colors-orange-4:#f6ad55;--theme-ui-colors-orange-5:#ed8936;--theme-ui-colors-orange-6:#dd6b20;--theme-ui-colors-orange-7:#c05621;--theme-ui-colors-orange-8:#9c4221;--theme-ui-colors-orange-9:#7b341e;--theme-ui-colors-yellow-1:#fffff0;--theme-ui-colors-yellow-2:#fefcbf;--theme-ui-colors-yellow-3:#faf089;--theme-ui-colors-yellow-4:#f6e05e;--theme-ui-colors-yellow-5:#ecc94b;--theme-ui-colors-yellow-6:#d69e2e;--theme-ui-colors-yellow-7:#b7791f;--theme-ui-colors-yellow-8:#975a16;--theme-ui-colors-yellow-9:#744210;--theme-ui-colors-green-1:#f0fff4;--theme-ui-colors-green-2:#c6f6d5;--theme-ui-colors-green-3:#9ae6b4;--theme-ui-colors-green-4:#68d391;--theme-ui-colors-green-5:#48bb78;--theme-ui-colors-green-6:#38a169;--theme-ui-colors-green-7:#2f855a;--theme-ui-colors-green-8:#276749;--theme-ui-colors-green-9:#22543d;--theme-ui-colors-teal-1:#e6fffa;--theme-ui-colors-teal-2:#b2f5ea;--theme-ui-colors-teal-3:#81e6d9;--theme-ui-colors-teal-4:#4fd1c5;--theme-ui-colors-teal-5:#38b2ac;--theme-ui-colors-teal-6:#319795;--theme-ui-colors-teal-7:#2c7a7b;--theme-ui-colors-teal-8:#285e61;--theme-ui-colors-teal-9:#234e52;--theme-ui-colors-blue-1:#ebf8ff;--theme-ui-colors-blue-2:#bee3f8;--theme-ui-colors-blue-3:#90cdf4;--theme-ui-colors-blue-4:#63b3ed;--theme-ui-colors-blue-5:#4299e1;--theme-ui-colors-blue-6:#3182ce;--theme-ui-colors-blue-7:#2b6cb0;--theme-ui-colors-blue-8:#2c5282;--theme-ui-colors-blue-9:#2a4365;--theme-ui-colors-indigo-1:#ebf4ff;--theme-ui-colors-indigo-2:#c3dafe;--theme-ui-colors-indigo-3:#a3bffa;--theme-ui-colors-indigo-4:#7f9cf5;--theme-ui-colors-indigo-5:#667eea;--theme-ui-colors-indigo-6:#5a67d8;--theme-ui-colors-indigo-7:#4c51bf;--theme-ui-colors-indigo-8:#434190;--theme-ui-colors-indigo-9:#3c366b;--theme-ui-colors-purple-1:#faf5ff;--theme-ui-colors-purple-2:#e9d8fd;--theme-ui-colors-purple-3:#d6bcfa;--theme-ui-colors-purple-4:#b794f4;--theme-ui-colors-purple-5:#9f7aea;--theme-ui-colors-purple-6:#805ad5;--theme-ui-colors-purple-7:#6b46c1;--theme-ui-colors-purple-8:#553c9a;--theme-ui-colors-purple-9:#44337a;--theme-ui-colors-pink-1:#fff5f7;--theme-ui-colors-pink-2:#fed7e2;--theme-ui-colors-pink-3:#fbb6ce;--theme-ui-colors-pink-4:#f687b3;--theme-ui-colors-pink-5:#ed64a6;--theme-ui-colors-pink-6:#d53f8c;--theme-ui-colors-pink-7:#b83280;--theme-ui-colors-pink-8:#97266d;--theme-ui-colors-pink-9:#702459;--theme-ui-colors-grayDark:#2d3748;--theme-ui-colors-text:#2d3748;--theme-ui-colors-background:#fff;--theme-ui-colors-primary:#6b46c1;--theme-ui-colors-primaryHover:#2c5282;--theme-ui-colors-secondary:#5f6c80;--theme-ui-colors-muted:#edf2f7;--theme-ui-colors-success:#9ae6b4;--theme-ui-colors-info:#63b3ed;--theme-ui-colors-warning:#faf089;--theme-ui-colors-danger:#feb2b2;--theme-ui-colors-light:#f7fafc;--theme-ui-colors-dark:#2d3748;--theme-ui-colors-textMuted:#718096;--theme-ui-colors-toggleIcon:#2d3748;--theme-ui-colors-heading:#000;--theme-ui-colors-divide:#cbd5e0;--theme-ui-colors-highlightLineBg:rgba(0, 0, 0, 0.035);--theme-ui-colors-plain-color:#393A34;--theme-ui-colors-plain-backgroundColor:#f6f8fa;--theme-ui-colors-comment-color:#999988;--theme-ui-colors-comment-fontStyle:italic;--theme-ui-colors-prolog-color:#999988;--theme-ui-colors-prolog-fontStyle:italic;--theme-ui-colors-doctype-color:#999988;--theme-ui-colors-doctype-fontStyle:italic;--theme-ui-colors-cdata-color:#999988;--theme-ui-colors-cdata-fontStyle:italic;--theme-ui-colors-namespace-opacity:0.7;--theme-ui-colors-string-color:#e3116c;--theme-ui-colors-attr-value-color:#e3116c;--theme-ui-colors-punctuation-color:#393A34;--theme-ui-colors-operator-color:#393A34;--theme-ui-colors-entity-color:#36acaa;--theme-ui-colors-url-color:#36acaa;--theme-ui-colors-symbol-color:#36acaa;--theme-ui-colors-number-color:#36acaa;--theme-ui-colors-boolean-color:#36acaa;--theme-ui-colors-variable-color:#36acaa;--theme-ui-colors-constant-color:#36acaa;--theme-ui-colors-property-color:#36acaa;--theme-ui-colors-regex-color:#36acaa;--theme-ui-colors-inserted-color:#36acaa;--theme-ui-colors-atrule-color:#00a4db;--theme-ui-colors-keyword-color:#00009f;--theme-ui-colors-attr-name-color:#00a4db;--theme-ui-colors-selector-color:#00009f;--theme-ui-colors-function-color:#d73a49;--theme-ui-colors-deleted-color:#d73a49;--theme-ui-colors-tag-color:#00009f;--theme-ui-colors-function-variable-color:#6f42c1;color:var(--theme-ui-colors-text);background-color:var(--theme-ui-colors-background);}html.theme-ui-light,.theme-ui-light html{--theme-ui-colors-transparent:transparent;--theme-ui-colors-black:#000;--theme-ui-colors-white:#fff;--theme-ui-colors-gray-1:#f7fafc;--theme-ui-colors-gray-2:#edf2f7;--theme-ui-colors-gray-3:#e2e8f0;--theme-ui-colors-gray-4:#cbd5e0;--theme-ui-colors-gray-5:#a0aec0;--theme-ui-colors-gray-6:#718096;--theme-ui-colors-gray-7:#4a5568;--theme-ui-colors-gray-8:#2d3748;--theme-ui-colors-gray-9:#1a202c;--theme-ui-colors-red-1:#fff5f5;--theme-ui-colors-red-2:#fed7d7;--theme-ui-colors-red-3:#feb2b2;--theme-ui-colors-red-4:#fc8181;--theme-ui-colors-red-5:#f56565;--theme-ui-colors-red-6:#e53e3e;--theme-ui-colors-red-7:#c53030;--theme-ui-colors-red-8:#9b2c2c;--theme-ui-colors-red-9:#742a2a;--theme-ui-colors-orange-1:#fffaf0;--theme-ui-colors-orange-2:#feebc8;--theme-ui-colors-orange-3:#fbd38d;--theme-ui-colors-orange-4:#f6ad55;--theme-ui-colors-orange-5:#ed8936;--theme-ui-colors-orange-6:#dd6b20;--theme-ui-colors-orange-7:#c05621;--theme-ui-colors-orange-8:#9c4221;--theme-ui-colors-orange-9:#7b341e;--theme-ui-colors-yellow-1:#fffff0;--theme-ui-colors-yellow-2:#fefcbf;--theme-ui-colors-yellow-3:#faf089;--theme-ui-colors-yellow-4:#f6e05e;--theme-ui-colors-yellow-5:#ecc94b;--theme-ui-colors-yellow-6:#d69e2e;--theme-ui-colors-yellow-7:#b7791f;--theme-ui-colors-yellow-8:#975a16;--theme-ui-colors-yellow-9:#744210;--theme-ui-colors-green-1:#f0fff4;--theme-ui-colors-green-2:#c6f6d5;--theme-ui-colors-green-3:#9ae6b4;--theme-ui-colors-green-4:#68d391;--theme-ui-colors-green-5:#48bb78;--theme-ui-colors-green-6:#38a169;--theme-ui-colors-green-7:#2f855a;--theme-ui-colors-green-8:#276749;--theme-ui-colors-green-9:#22543d;--theme-ui-colors-teal-1:#e6fffa;--theme-ui-colors-teal-2:#b2f5ea;--theme-ui-colors-teal-3:#81e6d9;--theme-ui-colors-teal-4:#4fd1c5;--theme-ui-colors-teal-5:#38b2ac;--theme-ui-colors-teal-6:#319795;--theme-ui-colors-teal-7:#2c7a7b;--theme-ui-colors-teal-8:#285e61;--theme-ui-colors-teal-9:#234e52;--theme-ui-colors-blue-1:#ebf8ff;--theme-ui-colors-blue-2:#bee3f8;--theme-ui-colors-blue-3:#90cdf4;--theme-ui-colors-blue-4:#63b3ed;--theme-ui-colors-blue-5:#4299e1;--theme-ui-colors-blue-6:#3182ce;--theme-ui-colors-blue-7:#2b6cb0;--theme-ui-colors-blue-8:#2c5282;--theme-ui-colors-blue-9:#2a4365;--theme-ui-colors-indigo-1:#ebf4ff;--theme-ui-colors-indigo-2:#c3dafe;--theme-ui-colors-indigo-3:#a3bffa;--theme-ui-colors-indigo-4:#7f9cf5;--theme-ui-colors-indigo-5:#667eea;--theme-ui-colors-indigo-6:#5a67d8;--theme-ui-colors-indigo-7:#4c51bf;--theme-ui-colors-indigo-8:#434190;--theme-ui-colors-indigo-9:#3c366b;--theme-ui-colors-purple-1:#faf5ff;--theme-ui-colors-purple-2:#e9d8fd;--theme-ui-colors-purple-3:#d6bcfa;--theme-ui-colors-purple-4:#b794f4;--theme-ui-colors-purple-5:#9f7aea;--theme-ui-colors-purple-6:#805ad5;--theme-ui-colors-purple-7:#6b46c1;--theme-ui-colors-purple-8:#553c9a;--theme-ui-colors-purple-9:#44337a;--theme-ui-colors-pink-1:#fff5f7;--theme-ui-colors-pink-2:#fed7e2;--theme-ui-colors-pink-3:#fbb6ce;--theme-ui-colors-pink-4:#f687b3;--theme-ui-colors-pink-5:#ed64a6;--theme-ui-colors-pink-6:#d53f8c;--theme-ui-colors-pink-7:#b83280;--theme-ui-colors-pink-8:#97266d;--theme-ui-colors-pink-9:#702459;--theme-ui-colors-grayDark:#2d3748;--theme-ui-colors-text:#2d3748;--theme-ui-colors-background:#fff;--theme-ui-colors-primary:#6b46c1;--theme-ui-colors-primaryHover:#2c5282;--theme-ui-colors-secondary:#5f6c80;--theme-ui-colors-muted:#edf2f7;--theme-ui-colors-success:#9ae6b4;--theme-ui-colors-info:#63b3ed;--theme-ui-colors-warning:#faf089;--theme-ui-colors-danger:#feb2b2;--theme-ui-colors-light:#f7fafc;--theme-ui-colors-dark:#2d3748;--theme-ui-colors-textMuted:#718096;--theme-ui-colors-toggleIcon:#2d3748;--theme-ui-colors-heading:#000;--theme-ui-colors-divide:#cbd5e0;--theme-ui-colors-highlightLineBg:rgba(0, 0, 0, 0.035);--theme-ui-colors-plain-color:#393A34;--theme-ui-colors-plain-backgroundColor:#f6f8fa;--theme-ui-colors-comment-color:#999988;--theme-ui-colors-comment-fontStyle:italic;--theme-ui-colors-prolog-color:#999988;--theme-ui-colors-prolog-fontStyle:italic;--theme-ui-colors-doctype-color:#999988;--theme-ui-colors-doctype-fontStyle:italic;--theme-ui-colors-cdata-color:#999988;--theme-ui-colors-cdata-fontStyle:italic;--theme-ui-colors-namespace-opacity:0.7;--theme-ui-colors-string-color:#e3116c;--theme-ui-colors-attr-value-color:#e3116c;--theme-ui-colors-punctuation-color:#393A34;--theme-ui-colors-operator-color:#393A34;--theme-ui-colors-entity-color:#36acaa;--theme-ui-colors-url-color:#36acaa;--theme-ui-colors-symbol-color:#36acaa;--theme-ui-colors-number-color:#36acaa;--theme-ui-colors-boolean-color:#36acaa;--theme-ui-colors-variable-color:#36acaa;--theme-ui-colors-constant-color:#36acaa;--theme-ui-colors-property-color:#36acaa;--theme-ui-colors-regex-color:#36acaa;--theme-ui-colors-inserted-color:#36acaa;--theme-ui-colors-atrule-color:#00a4db;--theme-ui-colors-keyword-color:#00009f;--theme-ui-colors-attr-name-color:#00a4db;--theme-ui-colors-selector-color:#00009f;--theme-ui-colors-function-color:#d73a49;--theme-ui-colors-deleted-color:#d73a49;--theme-ui-colors-tag-color:#00009f;--theme-ui-colors-function-variable-color:#6f42c1;}html.theme-ui-dark,.theme-ui-dark html{--theme-ui-colors-text:#cbd5e0;--theme-ui-colors-primary:#b794f4;--theme-ui-colors-secondary:#8a9ab0;--theme-ui-colors-toggleIcon:#cbd5e0;--theme-ui-colors-background:#1A202C;--theme-ui-colors-heading:#fff;--theme-ui-colors-divide:#2d3748;--theme-ui-colors-muted:#2d3748;--theme-ui-colors-highlightLineBg:rgba(255, 255, 255, 0.1);--theme-ui-colors-plain-color:#9CDCFE;--theme-ui-colors-plain-backgroundColor:#1E1E1E;--theme-ui-colors-prolog-color:rgb(0, 0, 128);--theme-ui-colors-comment-color:rgb(106, 153, 85);--theme-ui-colors-builtin-color:rgb(86, 156, 214);--theme-ui-colors-changed-color:rgb(86, 156, 214);--theme-ui-colors-keyword-color:rgb(86, 156, 214);--theme-ui-colors-interpolation-punctuation-color:rgb(86, 156, 214);--theme-ui-colors-number-color:rgb(181, 206, 168);--theme-ui-colors-inserted-color:rgb(181, 206, 168);--theme-ui-colors-constant-color:rgb(100, 102, 149);--theme-ui-colors-attr-name-color:rgb(156, 220, 254);--theme-ui-colors-variable-color:rgb(156, 220, 254);--theme-ui-colors-deleted-color:rgb(206, 145, 120);--theme-ui-colors-string-color:rgb(206, 145, 120);--theme-ui-colors-attr-value-color:rgb(206, 145, 120);--theme-ui-colors-template-punctuation-color:rgb(206, 145, 120);--theme-ui-colors-selector-color:rgb(215, 186, 125);--theme-ui-colors-tag-color:rgb(86, 156, 214);--theme-ui-colors-punctuation-color:#808080;--theme-ui-colors-operator-color:rgb(212, 212, 212);--theme-ui-colors-function-color:rgb(220, 220, 170);--theme-ui-colors-class-name-color:rgb(78, 201, 176);--theme-ui-colors-char-color:rgb(209, 105, 105);}</style><style data-emotion="css-global 1mawjxo" data-gatsby-head="true">*{box-sizing:border-box;}html{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.625;font-weight:400;color:var(--theme-ui-colors-text);background-color:var(--theme-ui-colors-background);margin:0;padding:0;box-sizing:border-box;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-text-size-adjust:100%;}html img{border-style:none;}html pre{font-family:Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;}html a{-webkit-transition:all 0.3s ease-in-out;transition:all 0.3s ease-in-out;color:var(--theme-ui-colors-text);}body{margin:0;}</style><title data-gatsby-head="true">Kubernetes Reference | Ruminations</title><link rel="icon" type="image/png" sizes="32x32" href="/ruminations/favicon-32x32.png" data-gatsby-head="true"/><link rel="icon" type="image/png" sizes="16x16" href="/ruminations/favicon-16x16.png" data-gatsby-head="true"/><link rel="apple-touch-icon" sizes="180x180" href="/ruminations/apple-touch-icon.png" data-gatsby-head="true"/></head><body><script>(function() { try {
  var mode = localStorage.getItem('theme-ui-color-mode');
  if (!mode) return
  document.documentElement.classList.add('theme-ui-' + mode);
} catch (e) {} })();</script><div id="___gatsby"><style data-emotion="css-global 6koz1s">html{--theme-ui-colors-transparent:transparent;--theme-ui-colors-black:#000;--theme-ui-colors-white:#fff;--theme-ui-colors-gray-1:#f7fafc;--theme-ui-colors-gray-2:#edf2f7;--theme-ui-colors-gray-3:#e2e8f0;--theme-ui-colors-gray-4:#cbd5e0;--theme-ui-colors-gray-5:#a0aec0;--theme-ui-colors-gray-6:#718096;--theme-ui-colors-gray-7:#4a5568;--theme-ui-colors-gray-8:#2d3748;--theme-ui-colors-gray-9:#1a202c;--theme-ui-colors-red-1:#fff5f5;--theme-ui-colors-red-2:#fed7d7;--theme-ui-colors-red-3:#feb2b2;--theme-ui-colors-red-4:#fc8181;--theme-ui-colors-red-5:#f56565;--theme-ui-colors-red-6:#e53e3e;--theme-ui-colors-red-7:#c53030;--theme-ui-colors-red-8:#9b2c2c;--theme-ui-colors-red-9:#742a2a;--theme-ui-colors-orange-1:#fffaf0;--theme-ui-colors-orange-2:#feebc8;--theme-ui-colors-orange-3:#fbd38d;--theme-ui-colors-orange-4:#f6ad55;--theme-ui-colors-orange-5:#ed8936;--theme-ui-colors-orange-6:#dd6b20;--theme-ui-colors-orange-7:#c05621;--theme-ui-colors-orange-8:#9c4221;--theme-ui-colors-orange-9:#7b341e;--theme-ui-colors-yellow-1:#fffff0;--theme-ui-colors-yellow-2:#fefcbf;--theme-ui-colors-yellow-3:#faf089;--theme-ui-colors-yellow-4:#f6e05e;--theme-ui-colors-yellow-5:#ecc94b;--theme-ui-colors-yellow-6:#d69e2e;--theme-ui-colors-yellow-7:#b7791f;--theme-ui-colors-yellow-8:#975a16;--theme-ui-colors-yellow-9:#744210;--theme-ui-colors-green-1:#f0fff4;--theme-ui-colors-green-2:#c6f6d5;--theme-ui-colors-green-3:#9ae6b4;--theme-ui-colors-green-4:#68d391;--theme-ui-colors-green-5:#48bb78;--theme-ui-colors-green-6:#38a169;--theme-ui-colors-green-7:#2f855a;--theme-ui-colors-green-8:#276749;--theme-ui-colors-green-9:#22543d;--theme-ui-colors-teal-1:#e6fffa;--theme-ui-colors-teal-2:#b2f5ea;--theme-ui-colors-teal-3:#81e6d9;--theme-ui-colors-teal-4:#4fd1c5;--theme-ui-colors-teal-5:#38b2ac;--theme-ui-colors-teal-6:#319795;--theme-ui-colors-teal-7:#2c7a7b;--theme-ui-colors-teal-8:#285e61;--theme-ui-colors-teal-9:#234e52;--theme-ui-colors-blue-1:#ebf8ff;--theme-ui-colors-blue-2:#bee3f8;--theme-ui-colors-blue-3:#90cdf4;--theme-ui-colors-blue-4:#63b3ed;--theme-ui-colors-blue-5:#4299e1;--theme-ui-colors-blue-6:#3182ce;--theme-ui-colors-blue-7:#2b6cb0;--theme-ui-colors-blue-8:#2c5282;--theme-ui-colors-blue-9:#2a4365;--theme-ui-colors-indigo-1:#ebf4ff;--theme-ui-colors-indigo-2:#c3dafe;--theme-ui-colors-indigo-3:#a3bffa;--theme-ui-colors-indigo-4:#7f9cf5;--theme-ui-colors-indigo-5:#667eea;--theme-ui-colors-indigo-6:#5a67d8;--theme-ui-colors-indigo-7:#4c51bf;--theme-ui-colors-indigo-8:#434190;--theme-ui-colors-indigo-9:#3c366b;--theme-ui-colors-purple-1:#faf5ff;--theme-ui-colors-purple-2:#e9d8fd;--theme-ui-colors-purple-3:#d6bcfa;--theme-ui-colors-purple-4:#b794f4;--theme-ui-colors-purple-5:#9f7aea;--theme-ui-colors-purple-6:#805ad5;--theme-ui-colors-purple-7:#6b46c1;--theme-ui-colors-purple-8:#553c9a;--theme-ui-colors-purple-9:#44337a;--theme-ui-colors-pink-1:#fff5f7;--theme-ui-colors-pink-2:#fed7e2;--theme-ui-colors-pink-3:#fbb6ce;--theme-ui-colors-pink-4:#f687b3;--theme-ui-colors-pink-5:#ed64a6;--theme-ui-colors-pink-6:#d53f8c;--theme-ui-colors-pink-7:#b83280;--theme-ui-colors-pink-8:#97266d;--theme-ui-colors-pink-9:#702459;--theme-ui-colors-grayDark:#2d3748;--theme-ui-colors-text:#2d3748;--theme-ui-colors-background:#fff;--theme-ui-colors-primary:#6b46c1;--theme-ui-colors-primaryHover:#2c5282;--theme-ui-colors-secondary:#5f6c80;--theme-ui-colors-muted:#edf2f7;--theme-ui-colors-success:#9ae6b4;--theme-ui-colors-info:#63b3ed;--theme-ui-colors-warning:#faf089;--theme-ui-colors-danger:#feb2b2;--theme-ui-colors-light:#f7fafc;--theme-ui-colors-dark:#2d3748;--theme-ui-colors-textMuted:#718096;--theme-ui-colors-toggleIcon:#2d3748;--theme-ui-colors-heading:#000;--theme-ui-colors-divide:#cbd5e0;--theme-ui-colors-highlightLineBg:rgba(0, 0, 0, 0.035);--theme-ui-colors-plain-color:#393A34;--theme-ui-colors-plain-backgroundColor:#f6f8fa;--theme-ui-colors-comment-color:#999988;--theme-ui-colors-comment-fontStyle:italic;--theme-ui-colors-prolog-color:#999988;--theme-ui-colors-prolog-fontStyle:italic;--theme-ui-colors-doctype-color:#999988;--theme-ui-colors-doctype-fontStyle:italic;--theme-ui-colors-cdata-color:#999988;--theme-ui-colors-cdata-fontStyle:italic;--theme-ui-colors-namespace-opacity:0.7;--theme-ui-colors-string-color:#e3116c;--theme-ui-colors-attr-value-color:#e3116c;--theme-ui-colors-punctuation-color:#393A34;--theme-ui-colors-operator-color:#393A34;--theme-ui-colors-entity-color:#36acaa;--theme-ui-colors-url-color:#36acaa;--theme-ui-colors-symbol-color:#36acaa;--theme-ui-colors-number-color:#36acaa;--theme-ui-colors-boolean-color:#36acaa;--theme-ui-colors-variable-color:#36acaa;--theme-ui-colors-constant-color:#36acaa;--theme-ui-colors-property-color:#36acaa;--theme-ui-colors-regex-color:#36acaa;--theme-ui-colors-inserted-color:#36acaa;--theme-ui-colors-atrule-color:#00a4db;--theme-ui-colors-keyword-color:#00009f;--theme-ui-colors-attr-name-color:#00a4db;--theme-ui-colors-selector-color:#00009f;--theme-ui-colors-function-color:#d73a49;--theme-ui-colors-deleted-color:#d73a49;--theme-ui-colors-tag-color:#00009f;--theme-ui-colors-function-variable-color:#6f42c1;color:var(--theme-ui-colors-text);background-color:var(--theme-ui-colors-background);}html.theme-ui-light,.theme-ui-light html{--theme-ui-colors-transparent:transparent;--theme-ui-colors-black:#000;--theme-ui-colors-white:#fff;--theme-ui-colors-gray-1:#f7fafc;--theme-ui-colors-gray-2:#edf2f7;--theme-ui-colors-gray-3:#e2e8f0;--theme-ui-colors-gray-4:#cbd5e0;--theme-ui-colors-gray-5:#a0aec0;--theme-ui-colors-gray-6:#718096;--theme-ui-colors-gray-7:#4a5568;--theme-ui-colors-gray-8:#2d3748;--theme-ui-colors-gray-9:#1a202c;--theme-ui-colors-red-1:#fff5f5;--theme-ui-colors-red-2:#fed7d7;--theme-ui-colors-red-3:#feb2b2;--theme-ui-colors-red-4:#fc8181;--theme-ui-colors-red-5:#f56565;--theme-ui-colors-red-6:#e53e3e;--theme-ui-colors-red-7:#c53030;--theme-ui-colors-red-8:#9b2c2c;--theme-ui-colors-red-9:#742a2a;--theme-ui-colors-orange-1:#fffaf0;--theme-ui-colors-orange-2:#feebc8;--theme-ui-colors-orange-3:#fbd38d;--theme-ui-colors-orange-4:#f6ad55;--theme-ui-colors-orange-5:#ed8936;--theme-ui-colors-orange-6:#dd6b20;--theme-ui-colors-orange-7:#c05621;--theme-ui-colors-orange-8:#9c4221;--theme-ui-colors-orange-9:#7b341e;--theme-ui-colors-yellow-1:#fffff0;--theme-ui-colors-yellow-2:#fefcbf;--theme-ui-colors-yellow-3:#faf089;--theme-ui-colors-yellow-4:#f6e05e;--theme-ui-colors-yellow-5:#ecc94b;--theme-ui-colors-yellow-6:#d69e2e;--theme-ui-colors-yellow-7:#b7791f;--theme-ui-colors-yellow-8:#975a16;--theme-ui-colors-yellow-9:#744210;--theme-ui-colors-green-1:#f0fff4;--theme-ui-colors-green-2:#c6f6d5;--theme-ui-colors-green-3:#9ae6b4;--theme-ui-colors-green-4:#68d391;--theme-ui-colors-green-5:#48bb78;--theme-ui-colors-green-6:#38a169;--theme-ui-colors-green-7:#2f855a;--theme-ui-colors-green-8:#276749;--theme-ui-colors-green-9:#22543d;--theme-ui-colors-teal-1:#e6fffa;--theme-ui-colors-teal-2:#b2f5ea;--theme-ui-colors-teal-3:#81e6d9;--theme-ui-colors-teal-4:#4fd1c5;--theme-ui-colors-teal-5:#38b2ac;--theme-ui-colors-teal-6:#319795;--theme-ui-colors-teal-7:#2c7a7b;--theme-ui-colors-teal-8:#285e61;--theme-ui-colors-teal-9:#234e52;--theme-ui-colors-blue-1:#ebf8ff;--theme-ui-colors-blue-2:#bee3f8;--theme-ui-colors-blue-3:#90cdf4;--theme-ui-colors-blue-4:#63b3ed;--theme-ui-colors-blue-5:#4299e1;--theme-ui-colors-blue-6:#3182ce;--theme-ui-colors-blue-7:#2b6cb0;--theme-ui-colors-blue-8:#2c5282;--theme-ui-colors-blue-9:#2a4365;--theme-ui-colors-indigo-1:#ebf4ff;--theme-ui-colors-indigo-2:#c3dafe;--theme-ui-colors-indigo-3:#a3bffa;--theme-ui-colors-indigo-4:#7f9cf5;--theme-ui-colors-indigo-5:#667eea;--theme-ui-colors-indigo-6:#5a67d8;--theme-ui-colors-indigo-7:#4c51bf;--theme-ui-colors-indigo-8:#434190;--theme-ui-colors-indigo-9:#3c366b;--theme-ui-colors-purple-1:#faf5ff;--theme-ui-colors-purple-2:#e9d8fd;--theme-ui-colors-purple-3:#d6bcfa;--theme-ui-colors-purple-4:#b794f4;--theme-ui-colors-purple-5:#9f7aea;--theme-ui-colors-purple-6:#805ad5;--theme-ui-colors-purple-7:#6b46c1;--theme-ui-colors-purple-8:#553c9a;--theme-ui-colors-purple-9:#44337a;--theme-ui-colors-pink-1:#fff5f7;--theme-ui-colors-pink-2:#fed7e2;--theme-ui-colors-pink-3:#fbb6ce;--theme-ui-colors-pink-4:#f687b3;--theme-ui-colors-pink-5:#ed64a6;--theme-ui-colors-pink-6:#d53f8c;--theme-ui-colors-pink-7:#b83280;--theme-ui-colors-pink-8:#97266d;--theme-ui-colors-pink-9:#702459;--theme-ui-colors-grayDark:#2d3748;--theme-ui-colors-text:#2d3748;--theme-ui-colors-background:#fff;--theme-ui-colors-primary:#6b46c1;--theme-ui-colors-primaryHover:#2c5282;--theme-ui-colors-secondary:#5f6c80;--theme-ui-colors-muted:#edf2f7;--theme-ui-colors-success:#9ae6b4;--theme-ui-colors-info:#63b3ed;--theme-ui-colors-warning:#faf089;--theme-ui-colors-danger:#feb2b2;--theme-ui-colors-light:#f7fafc;--theme-ui-colors-dark:#2d3748;--theme-ui-colors-textMuted:#718096;--theme-ui-colors-toggleIcon:#2d3748;--theme-ui-colors-heading:#000;--theme-ui-colors-divide:#cbd5e0;--theme-ui-colors-highlightLineBg:rgba(0, 0, 0, 0.035);--theme-ui-colors-plain-color:#393A34;--theme-ui-colors-plain-backgroundColor:#f6f8fa;--theme-ui-colors-comment-color:#999988;--theme-ui-colors-comment-fontStyle:italic;--theme-ui-colors-prolog-color:#999988;--theme-ui-colors-prolog-fontStyle:italic;--theme-ui-colors-doctype-color:#999988;--theme-ui-colors-doctype-fontStyle:italic;--theme-ui-colors-cdata-color:#999988;--theme-ui-colors-cdata-fontStyle:italic;--theme-ui-colors-namespace-opacity:0.7;--theme-ui-colors-string-color:#e3116c;--theme-ui-colors-attr-value-color:#e3116c;--theme-ui-colors-punctuation-color:#393A34;--theme-ui-colors-operator-color:#393A34;--theme-ui-colors-entity-color:#36acaa;--theme-ui-colors-url-color:#36acaa;--theme-ui-colors-symbol-color:#36acaa;--theme-ui-colors-number-color:#36acaa;--theme-ui-colors-boolean-color:#36acaa;--theme-ui-colors-variable-color:#36acaa;--theme-ui-colors-constant-color:#36acaa;--theme-ui-colors-property-color:#36acaa;--theme-ui-colors-regex-color:#36acaa;--theme-ui-colors-inserted-color:#36acaa;--theme-ui-colors-atrule-color:#00a4db;--theme-ui-colors-keyword-color:#00009f;--theme-ui-colors-attr-name-color:#00a4db;--theme-ui-colors-selector-color:#00009f;--theme-ui-colors-function-color:#d73a49;--theme-ui-colors-deleted-color:#d73a49;--theme-ui-colors-tag-color:#00009f;--theme-ui-colors-function-variable-color:#6f42c1;}html.theme-ui-dark,.theme-ui-dark html{--theme-ui-colors-text:#cbd5e0;--theme-ui-colors-primary:#b794f4;--theme-ui-colors-secondary:#8a9ab0;--theme-ui-colors-toggleIcon:#cbd5e0;--theme-ui-colors-background:#1A202C;--theme-ui-colors-heading:#fff;--theme-ui-colors-divide:#2d3748;--theme-ui-colors-muted:#2d3748;--theme-ui-colors-highlightLineBg:rgba(255, 255, 255, 0.1);--theme-ui-colors-plain-color:#9CDCFE;--theme-ui-colors-plain-backgroundColor:#1E1E1E;--theme-ui-colors-prolog-color:rgb(0, 0, 128);--theme-ui-colors-comment-color:rgb(106, 153, 85);--theme-ui-colors-builtin-color:rgb(86, 156, 214);--theme-ui-colors-changed-color:rgb(86, 156, 214);--theme-ui-colors-keyword-color:rgb(86, 156, 214);--theme-ui-colors-interpolation-punctuation-color:rgb(86, 156, 214);--theme-ui-colors-number-color:rgb(181, 206, 168);--theme-ui-colors-inserted-color:rgb(181, 206, 168);--theme-ui-colors-constant-color:rgb(100, 102, 149);--theme-ui-colors-attr-name-color:rgb(156, 220, 254);--theme-ui-colors-variable-color:rgb(156, 220, 254);--theme-ui-colors-deleted-color:rgb(206, 145, 120);--theme-ui-colors-string-color:rgb(206, 145, 120);--theme-ui-colors-attr-value-color:rgb(206, 145, 120);--theme-ui-colors-template-punctuation-color:rgb(206, 145, 120);--theme-ui-colors-selector-color:rgb(215, 186, 125);--theme-ui-colors-tag-color:rgb(86, 156, 214);--theme-ui-colors-punctuation-color:#808080;--theme-ui-colors-operator-color:rgb(212, 212, 212);--theme-ui-colors-function-color:rgb(220, 220, 170);--theme-ui-colors-class-name-color:rgb(78, 201, 176);--theme-ui-colors-char-color:rgb(209, 105, 105);}</style><style data-emotion="css-global 1mawjxo">*{box-sizing:border-box;}html{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.625;font-weight:400;color:var(--theme-ui-colors-text);background-color:var(--theme-ui-colors-background);margin:0;padding:0;box-sizing:border-box;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-text-size-adjust:100%;}html img{border-style:none;}html pre{font-family:Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;}html a{-webkit-transition:all 0.3s ease-in-out;transition:all 0.3s ease-in-out;color:var(--theme-ui-colors-text);}body{margin:0;}</style><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css-global cjr7z1">*{box-sizing:inherit;}[hidden]{display:none;}::selection{background-color:var(--theme-ui-colors-text);color:var(--theme-ui-colors-background);}</style><style data-emotion="css 1gq7j3t">.css-1gq7j3t{border:0;clip:react(0 0 0 0);height:1px;width:1px;margin:-1px;padding:0;overflow:hidden;position:absolute;}.css-1gq7j3t:focus{padding:1rem;position:fixed;top:15px;left:15px;background-color:var(--theme-ui-colors-heading);color:var(--theme-ui-colors-background);z-index:1;width:auto;height:auto;clip:auto;-webkit-text-decoration:none;text-decoration:none;}</style><a href="#skip-nav" data-skip-link="true" class="css-1gq7j3t">Skip to content</a><style data-emotion="css 10f80pj">.css-10f80pj{box-sizing:border-box;margin:0;min-width:0;width:100%;max-width:container;margin-left:auto;margin-right:auto;padding:1rem;max-width:1024px;}@media screen and (min-width: 640px){.css-10f80pj{padding:2rem;}}</style><div class="css-10f80pj"><style data-emotion="css egutgn">.css-egutgn{margin-bottom:4rem;}@media screen and (min-width: 640px){.css-egutgn{margin-bottom:8rem;}}</style><header class="css-egutgn"><style data-emotion="css 1xwyizx">.css-1xwyizx{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;}</style><style data-emotion="css 1pbimyf">.css-1pbimyf{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;}</style><div class="css-1pbimyf"><style data-emotion="css uxjqfw">.css-uxjqfw{color:var(--theme-ui-colors-heading);-webkit-text-decoration:none;text-decoration:none;}</style><a aria-label="Ruminations - Back to home" class="css-uxjqfw" href="/ruminations"><style data-emotion="css 19i8ga6">.css-19i8ga6{margin-top:0;margin-bottom:0;font-weight:600;font-size:1.5rem;}@media screen and (min-width: 640px){.css-19i8ga6{font-size:1.875rem;}}</style><div class="css-19i8ga6">Ruminations</div></a><style data-emotion="css 3ba0x7">.css-3ba0x7{opacity:0.65;position:relative;border-radius:4px;width:40px;height:25px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-transition:opacity 0.3s ease;transition:opacity 0.3s ease;border:none;outline:none;background:none;cursor:pointer;padding:0;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;}.css-3ba0x7:hover,.css-3ba0x7:focus{opacity:1;}</style><button type="button" aria-label="Color mode toggle" class="css-3ba0x7"><style data-emotion="css 1ggalm8">.css-1ggalm8{position:relative;width:24px;height:24px;border-radius:50%;-webkit-transition:all 0.45s ease;transition:all 0.45s ease;-webkit-transform:scale(0.55);-moz-transform:scale(0.55);-ms-transform:scale(0.55);transform:scale(0.55);}.css-1ggalm8:before{content:"";position:absolute;right:-9px;top:-9px;height:24px;width:24px;-webkit-transition:-webkit-transform 0.45s ease;transition:transform 0.45s ease;border-radius:50%;opacity:0;}.css-1ggalm8:after{content:"";width:8px;height:8px;border-radius:50%;margin:-4px 0 0 -4px;position:absolute;top:50%;left:50%;-webkit-transition:all 0.35s ease;transition:all 0.35s ease;box-shadow:0 -23px 0 var(--theme-ui-colors-toggleIcon),0 23px 0 var(--theme-ui-colors-toggleIcon),23px 0 0 var(--theme-ui-colors-toggleIcon),-23px 0 0 var(--theme-ui-colors-toggleIcon),15px 15px 0 var(--theme-ui-colors-toggleIcon),-15px 15px 0 var(--theme-ui-colors-toggleIcon),15px -15px 0 var(--theme-ui-colors-toggleIcon),-15px -15px 0 var(--theme-ui-colors-toggleIcon);-webkit-transform:scale(0);-moz-transform:scale(0);-ms-transform:scale(0);transform:scale(0);}</style><div class="css-1ggalm8"></div></button></div><style data-emotion="css fp1v3n">.css-fp1v3n{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;border-bottom-style:solid;border-bottom-width:1px;border-bottom-color:var(--theme-ui-colors-divide);padding-bottom:1rem;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin-top:1rem;color:var(--theme-ui-colors-secondary);-webkit-box-flex-flow:wrap;-webkit-flex-flow:wrap;-ms-flex-flow:wrap;flex-flow:wrap;}.css-fp1v3n a{color:var(--theme-ui-colors-secondary);}.css-fp1v3n a:hover{color:var(--theme-ui-colors-heading);}</style><div class="css-fp1v3n"><style data-emotion="css 1lx5s1f">.css-1lx5s1f{font-size:1rem;}.css-1lx5s1f a:not(:last-of-type){margin-right:1rem;}@media screen and (min-width: 640px){.css-1lx5s1f{font-size:18px;}}.css-1lx5s1f .active{color:var(--theme-ui-colors-heading);}</style><nav class="css-1lx5s1f"><style data-emotion="css bpdkdn">.css-bpdkdn{color:var(--theme-ui-colors-primary);-webkit-text-decoration:none;text-decoration:none;}.css-bpdkdn:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a class="css-bpdkdn" href="/ruminations/blog">Blog</a><a class="css-bpdkdn" href="/ruminations/about">About</a></nav><style data-emotion="css 45ghvz">.css-45ghvz{font-size:1rem;}.css-45ghvz a:not(:first-of-type){margin-left:1rem;}@media screen and (min-width: 640px){.css-45ghvz{font-size:18px;}}</style><div class="css-45ghvz"><style data-emotion="css aizfxq">.css-aizfxq{box-sizing:border-box;margin:0;min-width:0;color:var(--theme-ui-colors-primary);-webkit-text-decoration:none;text-decoration:none;}.css-aizfxq:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a href="https://github.com/vijethph" class="css-aizfxq">GitHub</a><a href="https://linkedin.com/in/vijethph1999" class="css-aizfxq">Linkedin</a></div></div></header><style data-emotion="css 1w9aswf">.css-1w9aswf .prism-code{font-size:1rem;webkit-overflow-scrolling:touch;background-color:var(--theme-ui-colors-transparent);min-width:100%;margin-bottom:0;margin-top:0;overflow:auto;}@media screen and (min-width: 640px){.css-1w9aswf .prism-code{font-size:1rem;}}@media screen and (min-width: 768px){.css-1w9aswf .prism-code{font-size:1.25rem;}}.css-1w9aswf .prism-code[data-linenumber="false"] .token-line{padding-left:1rem;}.css-1w9aswf .gatsby-highlight[data-language='none'] .code-content,.css-1w9aswf .gatsby-highlight[data-language=''] .code-content{padding-top:1rem;}.css-1w9aswf .code-content{padding:2rem 1rem 1rem 1rem;color:var(--theme-ui-colors-plain-color);background-color:var(--theme-ui-colors-plain-backgroundColor);}.css-1w9aswf .token{display:inline-block;}.css-1w9aswf p>code,.css-1w9aswf li>code{background-color:var(--theme-ui-colors-muted);color:var(--theme-ui-colors-heading);padding-left:0.5rem;padding-right:0.5rem;padding-top:0.25rem;padding-bottom:0.25rem;border-radius:4px;font-size:0.95em;}.css-1w9aswf .gatsby-highlight{font-size:1rem;position:relative;webkit-overflow-scrolling:touch;border-radius:4px;overflow:hidden;margin-left:0;margin-right:0;}@media screen and (min-width: 640px){.css-1w9aswf .gatsby-highlight{font-size:1rem;margin-left:0;margin-right:0;}}@media screen and (min-width: 768px){.css-1w9aswf .gatsby-highlight{font-size:1.25rem;margin-left:0;margin-right:0;}}@media screen and (min-width: 1024px){.css-1w9aswf .gatsby-highlight{margin-left:-1rem;margin-right:-1rem;}}.css-1w9aswf .gatsby-highlight .token-line{margin-left:-1rem;margin-right:-1rem;min-width:100%;}.css-1w9aswf .gatsby-highlight pre code{float:left;min-width:100%;}.css-1w9aswf .gatsby-highlight pre[class*="language-"]:before{background-color:var(--theme-ui-colors-white);border-radius:0 0 4px 4px;color:var(--theme-ui-colors-black);font-size:12px;letter-spacing:0.035rem;padding:0.1rem 0.5rem;position:absolute;left:1rem;text-align:right;text-transform:uppercase;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:600;}.css-1w9aswf .gatsby-highlight pre[class~="language-golang"]:before,.css-1w9aswf .gatsby-highlight pre[class~="language-go"]:before{content:"go";background:#79d4fd;color:var(--theme-ui-colors-black);}.css-1w9aswf .gatsby-highlight pre[class~="language-javascript"]:before,.css-1w9aswf .gatsby-highlight pre[class~="language-js"]:before{content:"js";background:#f7df1e;color:var(--theme-ui-colors-black);}.css-1w9aswf .gatsby-highlight pre[class~="language-jsx"]:before{content:"jsx";background:#61dafb;color:var(--theme-ui-colors-black);}.css-1w9aswf .gatsby-highlight pre[class~="language-ts"]:before{content:"ts";background:#61dafb;color:var(--theme-ui-colors-black);}.css-1w9aswf .gatsby-highlight pre[class~="language-tsx"]:before{content:"tsx";background:#61dafb;color:var(--theme-ui-colors-black);}.css-1w9aswf .gatsby-highlight pre[class~="language-html"]:before{content:"html";background:#005a9c;color:var(--theme-ui-colors-white);}.css-1w9aswf .gatsby-highlight pre[class~="language-xml"]:before{content:"xml";background:#005a9c;color:var(--theme-ui-colors-white);}.css-1w9aswf .gatsby-highlight pre[class~="language-svg"]:before{content:"svg";background:#005a9c;color:var(--theme-ui-colors-white);}.css-1w9aswf .gatsby-highlight pre[class~="language-graphql"]:before{content:"GraphQL";background:#E10098;}.css-1w9aswf .gatsby-highlight pre[class~="language-css"]:before{content:"css";background:#ff9800;color:var(--theme-ui-colors-black);}.css-1w9aswf .gatsby-highlight pre[class~="language-mdx"]:before{content:"mdx";background:#f9ac00;color:var(--theme-ui-colors-black);}.css-1w9aswf .gatsby-highlight pre[class~="language-php"]:before{content:"php";background:#777bb3;color:var(--theme-ui-colors-black);}.css-1w9aswf .gatsby-highlight pre[class~="language-py"]:before,.css-1w9aswf .gatsby-highlight pre[class~="language-python"]:before{content:"py";background:#306998;color:var(--theme-ui-colors-white);}.css-1w9aswf .gatsby-highlight pre[class~="language-text"]:before{content:"text";}.css-1w9aswf .gatsby-highlight pre[class~='language-shell']:before{content:'shell';}.css-1w9aswf .gatsby-highlight pre[class~='language-sh']:before{content:'sh';}.css-1w9aswf .gatsby-highlight pre[class~='language-bash']:before{content:'bash';}.css-1w9aswf .gatsby-highlight pre[class~='language-yaml']:before{content:'yaml';background:#ffa8df;}.css-1w9aswf .gatsby-highlight pre[class~='language-yml']:before{content:'yml';background:#ffa8df;}.css-1w9aswf .gatsby-highlight pre[class~='language-markdown']:before{content:'md';}.css-1w9aswf .gatsby-highlight pre[class~='language-json']:before,.css-1w9aswf .gatsby-highlight pre[class~='language-json5']:before{content:'json';background:linen;}.css-1w9aswf .gatsby-highlight pre[class~='language-diff']:before{content:'diff';background:#e6ffed;}.css-1w9aswf .gatsby-highlight>code[class*="language-"],.css-1w9aswf .gatsby-highlight>pre[class=*="language-"]{word-spacing:normal;word-break:normal;overflow-wrap:normal;line-height:1.5;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;}.css-1w9aswf .gatsby-highlight pre::-webkit-scrollbar{width:0.5rem;height:0.5rem;}.css-1w9aswf .gatsby-highlight pre::-webkit-scrollbar-thumb{background-color:var(--theme-ui-colors-primary);}.css-1w9aswf .gatsby-highlight pre::-webkit-scrollbar-track{background:var(--theme-ui-colors-muted);}.css-1w9aswf .line-number-style{display:inline-block;width:3em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:0.3;text-align:center;position:relative;}.css-1w9aswf .code-title{background-color:var(--theme-ui-colors-muted);color:var(--theme-ui-colors-text);font-size:1rem;padding-left:1rem;padding-right:1rem;padding-top:0.5rem;padding-bottom:0.5rem;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";}.css-1w9aswf .token-line{padding-right:1rem;}.css-1w9aswf .highlight-line{border-left:4px solid rgb(2, 155, 206);}.css-1w9aswf .highlight-line .line-number-style{width:calc(3em - 4px);opacity:0.5;left:-2px;}.css-1w9aswf .footnotes{border-top-style:solid;border-top-width:1px;border-top-color:var(--theme-ui-colors-divide);padding-top:0.5rem;margin-top:4rem;overflow:auto;}.css-1w9aswf .footnotes .sr-only{border:0;clip:rect(0, 0, 0, 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px;}</style><style data-emotion="css 1wlcpc3">.css-1wlcpc3{box-sizing:border-box;margin:0;min-width:0;}.css-1wlcpc3 .prism-code{font-size:1rem;webkit-overflow-scrolling:touch;background-color:var(--theme-ui-colors-transparent);min-width:100%;margin-bottom:0;margin-top:0;overflow:auto;}@media screen and (min-width: 640px){.css-1wlcpc3 .prism-code{font-size:1rem;}}@media screen and (min-width: 768px){.css-1wlcpc3 .prism-code{font-size:1.25rem;}}.css-1wlcpc3 .prism-code[data-linenumber="false"] .token-line{padding-left:1rem;}.css-1wlcpc3 .gatsby-highlight[data-language='none'] .code-content,.css-1wlcpc3 .gatsby-highlight[data-language=''] .code-content{padding-top:1rem;}.css-1wlcpc3 .code-content{padding:2rem 1rem 1rem 1rem;color:var(--theme-ui-colors-plain-color);background-color:var(--theme-ui-colors-plain-backgroundColor);}.css-1wlcpc3 .token{display:inline-block;}.css-1wlcpc3 p>code,.css-1wlcpc3 li>code{background-color:var(--theme-ui-colors-muted);color:var(--theme-ui-colors-heading);padding-left:0.5rem;padding-right:0.5rem;padding-top:0.25rem;padding-bottom:0.25rem;border-radius:4px;font-size:0.95em;}.css-1wlcpc3 .gatsby-highlight{font-size:1rem;position:relative;webkit-overflow-scrolling:touch;border-radius:4px;overflow:hidden;margin-left:0;margin-right:0;}@media screen and (min-width: 640px){.css-1wlcpc3 .gatsby-highlight{font-size:1rem;margin-left:0;margin-right:0;}}@media screen and (min-width: 768px){.css-1wlcpc3 .gatsby-highlight{font-size:1.25rem;margin-left:0;margin-right:0;}}@media screen and (min-width: 1024px){.css-1wlcpc3 .gatsby-highlight{margin-left:-1rem;margin-right:-1rem;}}.css-1wlcpc3 .gatsby-highlight .token-line{margin-left:-1rem;margin-right:-1rem;min-width:100%;}.css-1wlcpc3 .gatsby-highlight pre code{float:left;min-width:100%;}.css-1wlcpc3 .gatsby-highlight pre[class*="language-"]:before{background-color:var(--theme-ui-colors-white);border-radius:0 0 4px 4px;color:var(--theme-ui-colors-black);font-size:12px;letter-spacing:0.035rem;padding:0.1rem 0.5rem;position:absolute;left:1rem;text-align:right;text-transform:uppercase;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:600;}.css-1wlcpc3 .gatsby-highlight pre[class~="language-golang"]:before,.css-1wlcpc3 .gatsby-highlight pre[class~="language-go"]:before{content:"go";background:#79d4fd;color:var(--theme-ui-colors-black);}.css-1wlcpc3 .gatsby-highlight pre[class~="language-javascript"]:before,.css-1wlcpc3 .gatsby-highlight pre[class~="language-js"]:before{content:"js";background:#f7df1e;color:var(--theme-ui-colors-black);}.css-1wlcpc3 .gatsby-highlight pre[class~="language-jsx"]:before{content:"jsx";background:#61dafb;color:var(--theme-ui-colors-black);}.css-1wlcpc3 .gatsby-highlight pre[class~="language-ts"]:before{content:"ts";background:#61dafb;color:var(--theme-ui-colors-black);}.css-1wlcpc3 .gatsby-highlight pre[class~="language-tsx"]:before{content:"tsx";background:#61dafb;color:var(--theme-ui-colors-black);}.css-1wlcpc3 .gatsby-highlight pre[class~="language-html"]:before{content:"html";background:#005a9c;color:var(--theme-ui-colors-white);}.css-1wlcpc3 .gatsby-highlight pre[class~="language-xml"]:before{content:"xml";background:#005a9c;color:var(--theme-ui-colors-white);}.css-1wlcpc3 .gatsby-highlight pre[class~="language-svg"]:before{content:"svg";background:#005a9c;color:var(--theme-ui-colors-white);}.css-1wlcpc3 .gatsby-highlight pre[class~="language-graphql"]:before{content:"GraphQL";background:#E10098;}.css-1wlcpc3 .gatsby-highlight pre[class~="language-css"]:before{content:"css";background:#ff9800;color:var(--theme-ui-colors-black);}.css-1wlcpc3 .gatsby-highlight pre[class~="language-mdx"]:before{content:"mdx";background:#f9ac00;color:var(--theme-ui-colors-black);}.css-1wlcpc3 .gatsby-highlight pre[class~="language-php"]:before{content:"php";background:#777bb3;color:var(--theme-ui-colors-black);}.css-1wlcpc3 .gatsby-highlight pre[class~="language-py"]:before,.css-1wlcpc3 .gatsby-highlight pre[class~="language-python"]:before{content:"py";background:#306998;color:var(--theme-ui-colors-white);}.css-1wlcpc3 .gatsby-highlight pre[class~="language-text"]:before{content:"text";}.css-1wlcpc3 .gatsby-highlight pre[class~='language-shell']:before{content:'shell';}.css-1wlcpc3 .gatsby-highlight pre[class~='language-sh']:before{content:'sh';}.css-1wlcpc3 .gatsby-highlight pre[class~='language-bash']:before{content:'bash';}.css-1wlcpc3 .gatsby-highlight pre[class~='language-yaml']:before{content:'yaml';background:#ffa8df;}.css-1wlcpc3 .gatsby-highlight pre[class~='language-yml']:before{content:'yml';background:#ffa8df;}.css-1wlcpc3 .gatsby-highlight pre[class~='language-markdown']:before{content:'md';}.css-1wlcpc3 .gatsby-highlight pre[class~='language-json']:before,.css-1wlcpc3 .gatsby-highlight pre[class~='language-json5']:before{content:'json';background:linen;}.css-1wlcpc3 .gatsby-highlight pre[class~='language-diff']:before{content:'diff';background:#e6ffed;}.css-1wlcpc3 .gatsby-highlight>code[class*="language-"],.css-1wlcpc3 .gatsby-highlight>pre[class=*="language-"]{word-spacing:normal;word-break:normal;overflow-wrap:normal;line-height:1.5;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;}.css-1wlcpc3 .gatsby-highlight pre::-webkit-scrollbar{width:0.5rem;height:0.5rem;}.css-1wlcpc3 .gatsby-highlight pre::-webkit-scrollbar-thumb{background-color:var(--theme-ui-colors-primary);}.css-1wlcpc3 .gatsby-highlight pre::-webkit-scrollbar-track{background:var(--theme-ui-colors-muted);}.css-1wlcpc3 .line-number-style{display:inline-block;width:3em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:0.3;text-align:center;position:relative;}.css-1wlcpc3 .code-title{background-color:var(--theme-ui-colors-muted);color:var(--theme-ui-colors-text);font-size:1rem;padding-left:1rem;padding-right:1rem;padding-top:0.5rem;padding-bottom:0.5rem;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";}.css-1wlcpc3 .token-line{padding-right:1rem;}.css-1wlcpc3 .highlight-line{border-left:4px solid rgb(2, 155, 206);}.css-1wlcpc3 .highlight-line .line-number-style{width:calc(3em - 4px);opacity:0.5;left:-2px;}.css-1wlcpc3 .footnotes{border-top-style:solid;border-top-width:1px;border-top-color:var(--theme-ui-colors-divide);padding-top:0.5rem;margin-top:4rem;overflow:auto;}.css-1wlcpc3 .footnotes .sr-only{border:0;clip:rect(0, 0, 0, 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px;}</style><main id="skip-nav" class="css-1wlcpc3"><style data-emotion="css w1q1hj">.css-w1q1hj{box-sizing:border-box;margin:0;min-width:0;font-family:inherit;font-weight:700;line-height:1.25;font-family:inherit;font-weight:700;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1.875rem;margin-top:2rem;color:var(--theme-ui-colors-heading);}@media screen and (min-width: 640px){.css-w1q1hj{font-size:2.25rem;}}@media screen and (min-width: 768px){.css-w1q1hj{font-size:2.25rem;}}@media screen and (min-width: 1024px){.css-w1q1hj{font-size:3rem;}}</style><h1 class="css-w1q1hj">Kubernetes Reference</h1><style data-emotion="css 15ce8we">.css-15ce8we{color:var(--theme-ui-colors-secondary);margin-top:1rem;font-size:1rem;}.css-15ce8we a{color:var(--theme-ui-colors-secondary);}@media screen and (min-width: 640px){.css-15ce8we{font-size:1rem;}}@media screen and (min-width: 768px){.css-15ce8we{font-size:1.25rem;}}</style><p class="css-15ce8we"><time>30.07.2023</time> — <a class="css-bpdkdn" href="/ruminations/tags/kubernetes">Kubernetes</a>, <a class="css-bpdkdn" href="/ruminations/tags/dev-ops">DevOps</a>, <a class="css-bpdkdn" href="/ruminations/tags/backend-development">Backend Development</a>, <a class="css-bpdkdn" href="/ruminations/tags/complete-reference">Complete Reference</a> — <span>28<!-- --> min read</span></p><style data-emotion="css 1mae7sn">.css-1mae7sn{margin-top:4rem;margin-bottom:4rem;}.css-1mae7sn .gatsby-resp-image-wrapper{margin-top:2rem;margin-bottom:2rem;border-radius:4px;box-shadow:rgba(0, 0, 0, 0.1) 0px 16px 16px 0px,rgba(0, 0, 0, 0.1) 0px 8px 8px 0px,rgba(0, 0, 0, 0.1) 0px 4px 4px 0px;}@media screen and (min-width: 640px){.css-1mae7sn .gatsby-resp-image-wrapper{margin-top:2rem;margin-bottom:2rem;}}@media screen and (min-width: 768px){.css-1mae7sn .gatsby-resp-image-wrapper{margin-top:4rem;margin-bottom:4rem;}}.css-1mae7sn .gatsby-resp-image-wrapper .gatsby-resp-image-image{border-radius:4px;}.css-1mae7sn figure{margin:0;}.css-1mae7sn figure img{border-radius:4px;box-shadow:0 10px 15px -3px rgba(0, 0, 0, 0.1),0 4px 6px -2px rgba(0, 0, 0, 0.05);max-width:100%;}</style><section class="css-1mae7sn"><style data-emotion="css 90ntna">.css-90ntna{font-family:inherit;font-weight:700;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1.5rem;margin-top:2rem;color:var(--theme-ui-colors-heading);}@media screen and (min-width: 640px){.css-90ntna{font-size:1.875rem;}}@media screen and (min-width: 768px){.css-90ntna{font-size:1.875rem;}}@media screen and (min-width: 1024px){.css-90ntna{font-size:2.25rem;}}</style><style data-emotion="css 1h962gv">.css-1h962gv{font-family:inherit;font-weight:700;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1.5rem;margin-top:2rem;color:var(--theme-ui-colors-heading);font-family:inherit;font-weight:700;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1.5rem;margin-top:2rem;color:var(--theme-ui-colors-heading);}@media screen and (min-width: 640px){.css-1h962gv{font-size:1.875rem;}}@media screen and (min-width: 768px){.css-1h962gv{font-size:1.875rem;}}@media screen and (min-width: 1024px){.css-1h962gv{font-size:2.25rem;}}@media screen and (min-width: 640px){.css-1h962gv{font-size:1.875rem;}}@media screen and (min-width: 768px){.css-1h962gv{font-size:1.875rem;}}@media screen and (min-width: 1024px){.css-1h962gv{font-size:2.25rem;}}</style><h2 class="css-1h962gv">Introduction</h2>
<style data-emotion="css vehe2z">.css-vehe2z{font-size:1rem;letter-spacing:-0.003em;line-height:1.625;--baseline-multiplier:0.179;--x-height-multiplier:0.35;word-break:break-word;}@media screen and (min-width: 640px){.css-vehe2z{font-size:1rem;}}@media screen and (min-width: 768px){.css-vehe2z{font-size:1.25rem;}}</style><style data-emotion="css z0logh">.css-z0logh{font-size:1rem;letter-spacing:-0.003em;line-height:1.625;--baseline-multiplier:0.179;--x-height-multiplier:0.35;word-break:break-word;font-size:1rem;letter-spacing:-0.003em;line-height:1.625;--baseline-multiplier:0.179;--x-height-multiplier:0.35;word-break:break-word;}@media screen and (min-width: 640px){.css-z0logh{font-size:1rem;}}@media screen and (min-width: 768px){.css-z0logh{font-size:1.25rem;}}@media screen and (min-width: 640px){.css-z0logh{font-size:1rem;}}@media screen and (min-width: 768px){.css-z0logh{font-size:1.25rem;}}</style><p class="css-z0logh">Kubernetes is a portable, extensible, open source platform for managing containerized workloads and services, that facilitates both declarative configuration and automation. It has a large, rapidly growing ecosystem. Kubernetes services, support, and tools are widely available. Kubernetes is a system for running many different containers over multiple different machines. It is used when we need to run many different containers with different images.</p>
<p class="css-z0logh">We can work with Kubernetes in development environment using <strong class="css-zezy6m">minikube</strong>, and in production environment using AWS EKS, GKE or other managed solutions. <strong class="css-zezy6m">minikube</strong> is local Kubernetes, focusing on making it easy to learn and develop for Kubernetes. It is a command-line tool which sets up a tiny Kubernetes cluster. <strong class="css-zezy6m">kubectl</strong> is used to interact with a Kubernetes cluster in general and manage what all the different nodes are doing and what different containers they are running. Minikube is used to create and run a Kubernetes cluster in our local machine.</p>
<h2 class="css-1h962gv">Components of Kubernetes</h2>
<span><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 46.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACvUlEQVR42jWSXUxScRjGT7W1ddddN9104W1zs9t0fahoFpqfR74OnNP5+J9z/oigpjJ1JJKa4hRQ1liM0JGi0vTCuRVrCeJXfoCRzdEUL3Jtqbk2UDc6FT7be/t7n+d5X4TgGm/j2peQhMZqmtWVKmE/rlR3ySkWlrS1tVUODg7iFosFs1qtSkNr42MpZ8Yw2K3gAVEGIcxA/uui2ryZ/WLydxaiJNgi7cBWtKHXP0xW3HxY07M8q7dvLqCohGAYhuZ5NQMAYADPMwwlxfN0G5H8+q0tyJKkAMwSYBeEuUYYQ/hz72k+wnDaB7DOpAHadkg/UchYWEdzDX1aBtbjDElKURStkslk1QqFQoKiFVXlZDsswbuhXJCwKDPt8CrVsSDpHT+9i9Dqp49YliV4HsgYUi4FXSuzWtO0Ha0ok+v1LXVOp9Nis9k6heiGYbe7f9BqbvS4HUaX02luamq9lQZewkzRhxrHrxyE4pvEHKWUszRWTRFSucbgNtU+e2MWFRZKfb5J+8+Dw9T29vZeNBoNHx0dpdbW1oI7u/GTWOxb0uFw5Jx3qLPFS40jh7kISaryOIPPxrWN9lAqVAIMb6265l5dZTVWOT4+agt8TqQCK7F4cGkj7A+fpdZXQ4GZ0H7yw3I8MTFsPQdeqR34Ut7lPb6PkACIWL3bxLU4Wzm8rLzR/jWk7//oEosLin0+75B/I5maW47tBZci4dnVs9Tm+lJgOrB/8m4hnpz2DmWngZdrLDvijpFDkRBZXwYAR2EYTlVJ8XqViqABbOJQOamc8I4NzW0mUvOf/gEjfx2G1xaDM/PfT/yLuycet/VOGnidMLzP6ptKZCBArc4ULlsEeJ2IptUFNKcu4HmNiKKo3E6jsdg3MUa7XK8wp8MhnZoYZYSfRCfHPYRn+DXV3Nx847zDSGRDcnD8494fgt1hsji9FBIAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Kubernetes Components"
        title=""
        src="/ruminations/static/317c50cc08d4e77d02b005c4840fb7a6/7d769/components-of-kubernetes.png"
        srcset="/ruminations/static/317c50cc08d4e77d02b005c4840fb7a6/5243c/components-of-kubernetes.png 240w,
/ruminations/static/317c50cc08d4e77d02b005c4840fb7a6/ab158/components-of-kubernetes.png 480w,
/ruminations/static/317c50cc08d4e77d02b005c4840fb7a6/7d769/components-of-kubernetes.png 960w,
/ruminations/static/317c50cc08d4e77d02b005c4840fb7a6/4d9c5/components-of-kubernetes.png 1252w"
        sizes="(max-width: 960px) 100vw, 960px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></span>
<p class="css-z0logh">A cluster in the world of Kubernetes is the assembly of something called a <strong class="css-zezy6m">master</strong>, and one or more <strong class="css-zezy6m">nodes</strong>. A <strong class="css-zezy6m">node</strong> is a virtual machine or a physical computer which is going to be used to run some number of different containers. Each node can run different set of containers. All the different nodes created are managed by the master. The master has a set of different programs running on it that control what each of these different nodes is running at any given time. Developers interact with a Kubernetes cluster by reaching out to this master and provide instructions to it (example: to run certain number of containers using a specific image), which are then relayed by master to all the nodes. There is a load balancer outside the cluster which takes some amount of outside traffic in the form of network requests and relay all those requests into each of these different nodes.</p>
<p class="css-z0logh">The worker node(s) host the Pods that are the components of the application workload. The control plane manages the worker nodes and the Pods in the cluster. In production environments, the control plane usually runs across multiple computers and a cluster usually runs multiple nodes, providing fault-tolerance and high availability.</p>
<style data-emotion="css 11bn2j6">.css-11bn2j6{font-family:inherit;font-weight:700;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1.25rem;margin-top:2rem;color:var(--theme-ui-colors-heading);}@media screen and (min-width: 640px){.css-11bn2j6{font-size:1.5rem;}}@media screen and (min-width: 768px){.css-11bn2j6{font-size:1.5rem;}}@media screen and (min-width: 1024px){.css-11bn2j6{font-size:1.875rem;}}</style><style data-emotion="css ns8t27">.css-ns8t27{font-family:inherit;font-weight:700;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1.25rem;margin-top:2rem;color:var(--theme-ui-colors-heading);font-family:inherit;font-weight:700;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1.25rem;margin-top:2rem;color:var(--theme-ui-colors-heading);}@media screen and (min-width: 640px){.css-ns8t27{font-size:1.5rem;}}@media screen and (min-width: 768px){.css-ns8t27{font-size:1.5rem;}}@media screen and (min-width: 1024px){.css-ns8t27{font-size:1.875rem;}}@media screen and (min-width: 640px){.css-ns8t27{font-size:1.5rem;}}@media screen and (min-width: 768px){.css-ns8t27{font-size:1.5rem;}}@media screen and (min-width: 1024px){.css-ns8t27{font-size:1.875rem;}}</style><h3 class="css-ns8t27">Control Plane Components</h3>
<p class="css-z0logh">The control plane&#x27;s components make global decisions about the cluster (for example, scheduling), as well as detecting and responding to cluster events (for example, starting up a new pod when a deployment&#x27;s replicas field is unsatisfied).</p>
<p class="css-z0logh">Control plane components can be run on any machine in the cluster. However, for simplicity, set up scripts typically start all control plane components on the same machine, and do not run user containers on this machine.</p>
<style data-emotion="css rc057y">.css-rc057y li{font-size:1rem;letter-spacing:-0.003em;line-height:1.625;--baseline-multiplier:0.179;--x-height-multiplier:0.35;}@media screen and (min-width: 640px){.css-rc057y li{font-size:1rem;}}@media screen and (min-width: 768px){.css-rc057y li{font-size:1.25rem;}}</style><style data-emotion="css 15vy6y4">.css-15vy6y4 li{font-size:1rem;letter-spacing:-0.003em;line-height:1.625;--baseline-multiplier:0.179;--x-height-multiplier:0.35;}@media screen and (min-width: 640px){.css-15vy6y4 li{font-size:1rem;}}@media screen and (min-width: 768px){.css-15vy6y4 li{font-size:1.25rem;}}.css-15vy6y4 li{font-size:1rem;letter-spacing:-0.003em;line-height:1.625;--baseline-multiplier:0.179;--x-height-multiplier:0.35;}@media screen and (min-width: 640px){.css-15vy6y4 li{font-size:1rem;}}@media screen and (min-width: 768px){.css-15vy6y4 li{font-size:1.25rem;}}</style><ul class="css-15vy6y4">
<li class="css-zezy6m"><strong class="css-zezy6m">kube-apiserver</strong> - The API server is a component of the Kubernetes control plane that exposes the Kubernetes API. The API server is the front end for the Kubernetes control plane. The main implementation of a Kubernetes API server is kube-apiserver. kube-apiserver is designed to scale horizontally—that is, it scales by deploying more instances. We can run several instances of kube-apiserver and balance traffic between those instances.</li>
<li class="css-zezy6m"><strong class="css-zezy6m">etcd</strong> - Consistent and highly-available key value store used as Kubernetes&#x27; backing store for all cluster data</li>
<li class="css-zezy6m"><strong class="css-zezy6m">kube-scheduler</strong> - Control plane component that watches for newly created Pods with no assigned node, and selects a node for them to run on</li>
<li class="css-zezy6m"><strong class="css-zezy6m">kube-controller-manager</strong> - Control plane component that runs controller processes. Logically, each controller is a separate process, but to reduce complexity, they are all compiled into a single binary and run in a single process.</li>
<li class="css-zezy6m"><strong class="css-zezy6m">cloud-controller-manager</strong> - A Kubernetes control plane component that embeds cloud-specific control logic. The cloud controller manager lets us link our cluster into our cloud provider&#x27;s API, and separates out the components that interact with that cloud platform from components that only interact with our cluster. The cloud-controller-manager only runs controllers that are specific to our cloud provider. It combines several logically independent control loops into a single binary that we run as a single process. We can scale horizontally (run more than one copy) to improve performance or to help tolerate failures.</li>
</ul>
<h3 class="css-ns8t27">Node Components</h3>
<p class="css-z0logh">Node components run on every node, maintaining running pods and providing the Kubernetes runtime environment.</p>
<ul class="css-15vy6y4">
<li class="css-zezy6m"><strong class="css-zezy6m">kubelet</strong> - An agent that runs on each node in the cluster. It makes sure that containers are running in a Pod. The kubelet takes a set of PodSpecs that are provided through various mechanisms and ensures that the containers described in those PodSpecs are running and healthy. The kubelet doesn&#x27;t manage containers which were not created by Kubernetes.</li>
<li class="css-zezy6m"><strong class="css-zezy6m">kube-proxy</strong> - kube-proxy is a network proxy that runs on each node in the cluster, implementing part of the Kubernetes Service concept. kube-proxy maintains network rules on nodes. These network rules allow network communication to our Pods from network sessions inside or outside of our cluster.</li>
<li class="css-zezy6m"><strong class="css-zezy6m">container runtime</strong> - The container runtime is the software that is responsible for running containers. Kubernetes supports several container runtimes: Docker, containerd, CRI-O, and any implementation of the Kubernetes CRI (Container Runtime Interface).</li>
</ul>
<h2 class="css-1h962gv">Basic Commands</h2>
<h3 class="css-ns8t27">minikube commands</h3>
<ul class="css-15vy6y4">
<li class="css-zezy6m"><code class="css-zezy6m">minikube status</code> - provides information on minikube and kubectl running status</li>
<li class="css-zezy6m"><code class="css-zezy6m">minikube dashboard</code> - dashboard running on port 30000 which provides information on everything inside the Kubernetes cluster. Any edits made to any objects in the dashboard do not persist to the config files, hence it is discouraged.</li>
<li class="css-zezy6m"><code class="css-zezy6m">minikube cp &lt;source node name&gt;:&lt;source file path&gt; &lt;target node name&gt;:&lt;target file absolute path&gt; [flags]</code> - copy the specified file into minikube, it will be saved at path in your minikube. Default target node controlplane and If is omitted, It will trying to copy from host.</li>
<li class="css-zezy6m"><code class="css-zezy6m">minikube delete</code> - deletes a local Kubernetes cluster. This command deletes the VM, and removes all associated files.</li>
<li class="css-zezy6m"><code class="css-zezy6m">minikube ip</code> - retrieves the IP address of the specified node, and writes it to STDOUT. In local environment, the Kubernetes Node VM created by Minikube has its own IP address, which should be used to access any pod / service running in Minikube, not the localhost. Use <code class="css-zezy6m">minikube ip</code> command to get this IP address.</li>
<li class="css-zezy6m"><code class="css-zezy6m">minikube logs</code> - Gets the logs of the running instance, used for debugging minikube, not user code.</li>
</ul>
<h3 class="css-ns8t27">kubectl commands</h3>
<ul class="css-15vy6y4">
<li class="css-zezy6m"><code class="css-zezy6m">kubectl cluster-info</code> - provides information on master, KubeDNS status</li>
<li class="css-zezy6m"><code class="css-zezy6m">kubectl apply -f &lt;filename&gt;</code> - it is used to provide a config file to kubectl. <code class="css-zezy6m">apply</code> command changes the current configuration of our cluster with kubectl. It is also possible to run this command on all YAML files in a directory by using <code class="css-zezy6m">kubectl apply -f &lt;folder-name&gt;</code>.</li>
<li class="css-zezy6m"><code class="css-zezy6m">kubectl get pods</code> - prints the status of all running pods. <code class="css-zezy6m">get pods</code> - specifies that information needs to be retrieved about a running object, and the object type is pods in this case. In the output, under <code class="css-zezy6m">READY</code> section, 1/1 indicates that there is one copy of the object running, and desired number of objects running is 1. <code class="css-zezy6m">-o wide</code> arguments for <code class="css-zezy6m">get pods</code> command provides more information on pods, like host IP and node name.<!-- -->
<ul class="css-15vy6y4">
<li class="css-zezy6m"><code class="css-zezy6m">kubectl get services</code> prints the status of all running services. It doesn&#x27;t display the <code class="css-zezy6m">targetPort</code> of services.</li>
<li class="css-zezy6m"><code class="css-zezy6m">kubectl get deployments</code> prints the status of all deployments, in the output of which <code class="css-zezy6m">DESIRED</code> and <code class="css-zezy6m">CURRENT</code> represents number of desired objects and number of current objects running respectively, <code class="css-zezy6m">UP-TO-DATE</code> represents number of objects up-to-date with given config file and <code class="css-zezy6m">AVAILABLE</code> represents number of objects that are ready to receive traffic.</li>
<li class="css-zezy6m"><code class="css-zezy6m">kubectl get pv</code> lists out all persistent volumes attached to the Pods</li>
<li class="css-zezy6m"><code class="css-zezy6m">kubectl get pvc</code> lists out all persistent volume claims configured.</li>
</ul>
</li>
<li class="css-zezy6m"><code class="css-zezy6m">kubectl describe &lt;object-type&gt; &lt;object-name&gt;</code> - gets detailed information about an object inside a Kubernetes cluster. If <code class="css-zezy6m">&lt;object-name&gt;</code> is omitted, then it describes all objects having <code class="css-zezy6m">&lt;object-type&gt;</code>. Example: <code class="css-zezy6m">kubectl describe pod client-pod1</code>.</li>
<li class="css-zezy6m"><code class="css-zezy6m">kubectl delete -f &lt;config-file&gt;</code> - removes a running object specified by config file that created the object. Deleting objects is an imperative approach in Kubernetes (not declarative).</li>
<li class="css-zezy6m"><code class="css-zezy6m">kubectl set image &lt;object-type&gt;/&lt;object-name&gt; &lt;container-name&gt;=&lt;new-image-to-use&gt;</code> - changes a property of an object inside the cluster by specifying the object name, property and the new value that the property should have.</li>
<li class="css-zezy6m"><code class="css-zezy6m">kubectl delete &lt;object-type&gt; &lt;object-name&gt;</code> - deletes an object. Example: <code class="css-zezy6m">kubectl delete deployment client-deployment</code> - deletes a deployment.</li>
<li class="css-zezy6m"><code class="css-zezy6m">kubectl logs &lt;pod-name&gt;</code> - gets all logs for a pod, if they exist.</li>
<li class="css-zezy6m"><code class="css-zezy6m">kubetl get storageclass</code> - lists out all different storage options available in the cluster that Kubernetes has for creating a Persistent Volume. <code class="css-zezy6m">standard</code> is the default option.</li>
</ul>
<h2 class="css-1h962gv">Kubernetes Objects</h2>
<span><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 71.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAABYlAAAWJQFJUiTwAAACNklEQVR42m1S2XKjMBD0///U7ktqk0o5G5uAzWEJxCEugcQlrsTbmGzVPuw8CAamZ3pafViWJUkSx3F830/TdJ5npHEc53l2v9+XeWGMBUGAX0jXdf38Jw6o7rouy7I8z/u+n6aJEmo79sUiJZl0NwcBJYSg9X/AWuumaQDDiS5IlVIpT6TSltN2w8oScTQCNAUYgK9HfIP3HFTRP4oibFEUhSjLQtReJOt+4WL0eSulFEJgBmpAE5PQ6xscx6FhnG+ei091LbffSs1fPc3NUFyntf1cMQ2sF8s0X19fOec7+AuPQs7vrqxAXJeyy2QrsEQY0TBlra76qdFjP05aT4tLk4CFo9YbGMuMuveY+HUuaFqy/Ez4MRGBd/Ov9hXiMZY44dGkP/z83Y2aS9BCtWWB0MthGAbojNvBmn3fYQW0/PDyk3nzHMu03eD4U8vqIfWSch5uwbA5VDjs6t0fsXxOoonTOju79OmURMXYR1d2eiKcsNQVTbj+DeiKc6ON4ZBRD6PqCjd6M8iLaCiL+cWhxL6oRmXKvrLfUXmZ5nF5MAYSIw+4VfDgj6hERXljM7ldScgI8TxCm0bVSpu+LKqO83gPzNvAO2e0EKJSjeTxEAZoP5dliaI0zTZBh9n3dF1rIWCCYkduJgEBgHGxlmWdPz4cI0m8sihygOFnlMZxRG/B7cSpn7quaxhGXde72zaT4A3GhIHhs6aVp/P78/PLXoHAOse3o0fcfuiwIMraFg5SWus/9r0KUbaga9IAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Kubernetes API Structure"
        title=""
        src="/ruminations/static/633fc9fcb059a94e0b299692f3d0c949/7d769/kube-api-structure.png"
        srcset="/ruminations/static/633fc9fcb059a94e0b299692f3d0c949/5243c/kube-api-structure.png 240w,
/ruminations/static/633fc9fcb059a94e0b299692f3d0c949/ab158/kube-api-structure.png 480w,
/ruminations/static/633fc9fcb059a94e0b299692f3d0c949/7d769/kube-api-structure.png 960w,
/ruminations/static/633fc9fcb059a94e0b299692f3d0c949/87339/kube-api-structure.png 1440w,
/ruminations/static/633fc9fcb059a94e0b299692f3d0c949/88b03/kube-api-structure.png 1920w,
/ruminations/static/633fc9fcb059a94e0b299692f3d0c949/9d489/kube-api-structure.png 3000w"
        sizes="(max-width: 960px) 100vw, 960px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></span>
<p class="css-z0logh">Kubernetes objects are persistent entities in the Kubernetes system. Kubernetes uses these entities to represent the state of our cluster. Specifically, they can describe:</p>
<ul class="css-15vy6y4">
<li class="css-zezy6m">What containerized applications are running (and on which nodes)</li>
<li class="css-zezy6m">The resources available to those applications</li>
<li class="css-zezy6m">The policies around how those applications behave, such as restart policies, upgrades, and fault-tolerance</li>
<li class="css-zezy6m">A Kubernetes object is a &quot;record of intent&quot; -- once we create the object, the Kubernetes system will constantly work to ensure that object exists. By creating an object, we&#x27;re effectively telling the Kubernetes system what we want our cluster&#x27;s workload to look like; this is our cluster&#x27;s desired state.</li>
</ul>
<p class="css-z0logh">Almost every Kubernetes object includes two nested object fields that govern the object&#x27;s configuration: the object <code class="css-zezy6m">spec`` and the object </code>status`. For objects that have a spec, we have to set this when we create the object, providing a description of the characteristics we want the resource to have: its desired state.</p>
<p class="css-z0logh">The status describes the current state of the object, supplied and updated by the Kubernetes system and its components. The Kubernetes control plane continually and actively manages every object&#x27;s actual state to match the desired state we supplied.</p>
<p class="css-z0logh">Kubernetes expects all images to already be built, which are ready for deployment on to Kubernetes cluster. We have multiple configuration files in Kubernetes, and each of these config files are used to create a different object (which isn&#x27;t necessarily a container) using kubectl. We have to manually set up all networking in Kubernetes.</p>
<p class="css-z0logh">Example Object Types include: StatefulSet, ReplicaController, Pod, Service. Objects are essentially things that are going to be created inside Kubernetes cluster to get our application running as expected, and they serve different purposes - running a container (Pod), monitoring a container, setting up networking (Service) etc. The <code class="css-zezy6m">kind</code> keyword in yaml files represents the type of object that should be created.</p>
<p class="css-z0logh">When we specify the <code class="css-zezy6m">apiVersion</code>, it essentially scopes / limits the types of objects that we can specify that we want to create within any configuration file. Each API version defines a different set of &#x27;objects&#x27; we can use.</p>
<p class="css-z0logh">A <strong class="css-zezy6m">Pod</strong> is a grouping of containers (one or more) with a very common purpose, which runs these closely related containers. It is the smallest thing we can deploy within a Kubernetes cluster, to run a single container. Always group containers in a pod that have a very tightly coupled relationship, and must be running together. <code class="css-zezy6m">metadata</code> is used in kubectl to provide additional information about the object which can be useful in logging. Pod runs a single set of containers, used for development purposes, but not in production. Every single Pod gets an IP address assigned to it that is internal to the VM.</p>
<p class="css-z0logh">A <strong class="css-zezy6m">Service</strong> sets up networking in a Kubernetes cluster. There are 4 commonly used subtypes among Services: ClusterIP, NodePort, LoadBalancer, Ingress. The purpose of a NodePort service is to expose a container to the outside world, and it is only good for development work.</p>
<p class="css-z0logh">A <strong class="css-zezy6m">Deployment</strong> is a Kubernetes object which maintains a set of identical pods, ensuring that they have the correct config and that the right number exists. Deployment object is also referred to as a type of contoller. A <strong class="css-zezy6m">controller</strong> is any type of object that constantly works to make some desired state a reality inside the cluster. Deployment runs a set of identical pods (one or more) and monitors the state of each pod, updating as necessary. It is frequently used in both development and production environments. A Deployment consists of a pod template, which is essentially a configuration block which describes pods created by the deployment (ReplicaSets are legacy variant of Deployments).</p>
<p class="css-z0logh"><strong class="css-zezy6m">ClusterIP</strong> service exposes a set of pods to other objects in the Kubernetes cluster (but not to outside world), whereas <strong class="css-zezy6m">NodePort</strong> exposes a set of pods to the outside world. ClusterIP follows the same port nomenclature as NodePort service.</p>
<p class="css-z0logh">A <strong class="css-zezy6m">Namespace</strong> is used to isolate the different resources that are created inside Kubernetes cluster. A <strong class="css-zezy6m">ConfigMap</strong> is an object that holds some amount of configuration that can be used throughout the cluster. <code class="css-zezy6m">kube-system</code> namespace (which is created automatically) contains some objects that make the entire cluster work as expected at an administration level.</p>
<p class="css-z0logh">Let&#x27;s consider a container having exposed port 3000 via <code class="css-zezy6m">containerPort</code> option, running in a Pod, which is enclosed and running within a Kubernetes Node (e.g., VM created by MiniKube). Every single node or every single member of a Kubernetes cluster that we create has a program on it called <code class="css-zezy6m">kube-proxy</code>, which is essentially the one single-window to the outside world. Any requests coming in flow through <code class="css-zezy6m">kube-proxy</code>, which inspects the request and decides how to route it to different services or different pods that are created inside the Node. The NodePort service forwards the incoming request from <code class="css-zezy6m">kube-proxy</code> to the exposed port on the running container defined inside the Pod.</p>
<p class="css-z0logh"><strong class="css-zezy6m">Label Selector System</strong> is used in Kubernetes to specify which Pod should the Service route the incoming requests. In the provided example configs, the <code class="css-zezy6m">component: web</code> key-value pair under <code class="css-zezy6m">labels</code> allows the container to link to Service with <code class="css-zezy6m">component: web</code> key-value pair in its configuration. The key-value pair can be anything, as long it is the same for both Pod and Service. This system is also used by Deployment to communicate to master to gain control over the objects created by master having the specified key-value pairs. Service watches every pod that matches its selector and then automatically route traffic to it, irrespective of pod deletion and re-creation (resulting in change of Pod&#x27;s internal IP address).</p>
<p class="css-z0logh">Master contains 4 programs that control the entire Kubernetes cluster. One of them, <strong class="css-zezy6m">Kube API server</strong> is responsible for monitoring the current status of all the different nodes inside the cluster and ensure that they are running. It takes in YAML deployment files as input and maintains a table of all objects that are currently running and the objects that need to be run along with the required number of copies of objects. Each node has a copy of Docker running in it, which pulls image from provided docker registry and runs the containers as per the requirements. The <strong class="css-zezy6m">Kube API server</strong> automatically instructs nodes to restart crashed containers and ensures that the desired number of objects are running.</p>
<p class="css-z0logh">Each node can run a dissimilar set of containers, depending on the requirements (number of desired objects). To deploy something, we update the desired state of the master with a config file and the master works constantly to fulfill this state. But <code class="css-zezy6m">kubectl apply -f &lt;filename&gt;</code> can only be used to update certain fields like image, but not container ports or other fields.</p>
<h2 class="css-1h962gv">Sample Configurations</h2>
<p class="css-z0logh">Sample container config (Pod)</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="prism-code language-yaml" data-linenumber="false"><style data-emotion="css ce1lkk">.css-ce1lkk{background-color:var(--theme-ui-colors-background);border:none;color:var(--theme-ui-colors-text);cursor:pointer;font-size:14px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";letter-spacing:0.025rem;-webkit-transition:all 0.3s ease-in-out;transition:all 0.3s ease-in-out;position:absolute;right:0;z-index:1;border-radius:0 0 0 0.25rem;padding:0.25rem 0.6rem;}@media screen and (min-width: 640px){.css-ce1lkk{font-size:14px;}}@media screen and (min-width: 768px){.css-ce1lkk{font-size:16px;}}.css-ce1lkk[disabled]{cursor:not-allowed;}.css-ce1lkk:not([disabled]):hover{background-color:var(--theme-ui-colors-primary);color:var(--theme-ui-colors-white);}</style><button type="button" name="copy code to clipboard" class="code-copy-button css-ce1lkk">Copy<style data-emotion="css 15vf505">.css-15vf505{border:0;clip:rect(0, 0, 0, 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px;}</style><span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="code-content language-yaml"><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">apiVersion</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> v1</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">kind</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> Pod</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">metadata</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">name</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> client</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">pod</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">labels</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">component</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> web</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">spec</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">containers</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">name</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> client</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">image</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> someuser/multi</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">worker </span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)"># assuming image is on DockerHub</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">ports</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">        </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">containerPort</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token number" style="color:var(--theme-ui-colors-number-color)">3000</span></div></code></pre></div>
<style data-emotion="css igtsiw">.css-igtsiw{background-color:var(--theme-ui-colors-muted);border:0;height:1px;margin:1rem;margin-left:0;margin-right:0;}</style><style data-emotion="css 1ve732v">.css-1ve732v{background-color:var(--theme-ui-colors-muted);border:0;height:1px;margin:1rem;margin-left:0;margin-right:0;background-color:var(--theme-ui-colors-muted);border:0;height:1px;margin:1rem;margin-left:0;margin-right:0;}</style><hr class="css-1ve732v"/>
<p class="css-z0logh">Sample networking config (NodePort)</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="prism-code language-yaml" data-linenumber="false"><button type="button" name="copy code to clipboard" class="code-copy-button css-ce1lkk">Copy<span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="code-content language-yaml"><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">apiVersion</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> v1</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">kind</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> Service</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">metadata</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">name</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> client</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">node</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">port</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">spec</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">type</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> NodePort</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">ports</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)"># describes all the collection of ports that need to be opened up or mapped on the target objects</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">port</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token number" style="color:var(--theme-ui-colors-number-color)">3050</span><span class="token plain"> </span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)"># port that another Pod / container could connect in order to get access to target container</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">targetPort</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token number" style="color:var(--theme-ui-colors-number-color)">3000</span><span class="token plain"> </span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)"># port of target container that is exposed</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">nodePort</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token number" style="color:var(--theme-ui-colors-number-color)">31515</span><span class="token plain"> </span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)"># port truly exposed to outside world, which we can use to connect to target container (always ranges between 30000 - 32767, random number in this range is assigned as defaulf if this is not specified)</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">selector</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">component</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> web </span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)"># Service looks for this key-value pair among all objects metadata, and forwards the request to that object for the above specified ports.</span></div></code></pre></div>
<hr class="css-1ve732v"/>
<p class="css-z0logh">Sample deployment config</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="prism-code language-yaml" data-linenumber="false"><button type="button" name="copy code to clipboard" class="code-copy-button css-ce1lkk">Copy<span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="code-content language-yaml"><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">apiVersion</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> apps/v1</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">kind</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> Deployment</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">metadata</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">name</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> client</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">deployment</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">spec</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">replicas</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token number" style="color:var(--theme-ui-colors-number-color)">1</span><span class="token plain"> </span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)"># number of different pods the deployment is supposed to create / maintain</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">selector</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)"># similar to &quot;selector&quot; in service configuration</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">matchLabels</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)"># Deployment gains control over objects having these labels</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">component</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> web</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">template</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)"># it specifies the configuration used for every single pod that is created / maintained by this deployment</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">metadata</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">labels</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">        </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">component</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> web</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">spec</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">containers</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">        </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">name</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> client</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">          </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">image</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> someuser/multi</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">client</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">          </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">ports</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">            </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">containerPort</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token number" style="color:var(--theme-ui-colors-number-color)">3000</span></div></code></pre></div>
<hr class="css-1ve732v"/>
<p class="css-z0logh">Sample ClusterIP service config</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="prism-code language-yaml" data-linenumber="false"><button type="button" name="copy code to clipboard" class="code-copy-button css-ce1lkk">Copy<span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="code-content language-yaml"><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">apiVersion</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> v1</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">kind</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> Service</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">metadata</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">name</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> client</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">cluster</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">ip</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">service</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">spec</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">type</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> ClusterIP</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">selector</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">component</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> web</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">ports</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">port</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token number" style="color:var(--theme-ui-colors-number-color)">3000</span><span class="token plain"> </span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)"># other objects in the cluster access the service using this port</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">targetPort</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token number" style="color:var(--theme-ui-colors-number-color)">3000</span><span class="token plain"> </span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)"># port on the target pod that the service is providing access to</span></div></code></pre></div>
<h2 class="css-1h962gv">Kubernetes Deployment Methods</h2>
<p class="css-z0logh">2 ways of deployments (Kubernetes supports both of them):</p>
<ol class="css-15vy6y4">
<li class="css-zezy6m"><strong class="css-zezy6m">Imperative deployments</strong> - &quot;Do exactly these steps to arrive at this container setup&quot;. Implicitly specify each step that should be taken for the deployment. Example: running kubectl commands to update some nodes to run the latest version of an image</li>
<li class="css-zezy6m"><strong class="css-zezy6m">Declarative deployments</strong> - &quot;Our container setup should look like this, make it happen&quot;. Specify requirements at a high level and let the service handle the rest. Example: updating kubernetes config files to tell master to handle updation of some nodes to a new version of an image.</li>
</ol>
<p class="css-z0logh"><strong class="css-zezy6m">Kubernetes Github repo issue #33664</strong> - issue with making deployment file to force deployment to update all pods without changing image name or image tag. The problem with Deployment is there is no indicator for container image version that mentions that pods need to be deployed again where the same image has changed. kubectl apply will reject the config file if there are no changes (even if the image has been changed in the container registry). There are 3 ways to solve this issue:</p>
<ol class="css-15vy6y4">
<li class="css-zezy6m">Manually delete pods to get the Deployment to recreate them with the latest version (not recommended, as it could lead to deletion of wrong pods in production)</li>
<li class="css-zezy6m">Tag built images with a real version number and specify that version in the config file, which just adds an extra step in the production deployment process</li>
<li class="css-zezy6m">Use an imperative command to update the image version the Deployment should use (most reasonable of the three). Example: tag the image with a version number (and push it to container registry), then run <code class="css-zezy6m">kubectl set image &lt;object-type&gt;/&lt;object-name&gt; &lt;container-name&gt;=&lt;new-image-to-use&gt;</code> which changes the &quot;image&quot; property of an object (like Deployment) by specifying the container name that should be updated along with the full name of new image to be used for the container. Here, this command would be: <code class="css-zezy6m">kubectl set image deployment/client-deployment client=someuser/multi-client:v5</code>.</li>
</ol>
<p class="css-z0logh">When minikube is installed, there are 2 Docker client-server pairs running in the local environment: one for Docker (if it was installed prior), and the other pair created by minikube within VM (Node). If we want to configure our local Docker CLI client to communicate with Docker servier within minikube VM, use <code class="css-zezy6m">eval $(minikube docker-env)</code> which temporarily configures the Docker CLI to connect to Docker server inside Kubernetes Node temporarily (until the end of terminal session). This can be used for debugging, manually killing containers inside Kubernetes Node and also delete cached images in the Node.</p>
<p class="css-z0logh">It is possible to combine multiple config files into a single file, and there is no limit to the number of config pieces that can be put into a file. All configs within a file are separated by <code class="css-zezy6m">---</code> which indicates the separator. Recommended approach is to keep every config in a separate file to identify objects easily.</p>
<h2 class="css-1h962gv">Persistent Volume Claim (PVC)</h2>
<span><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 833px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 53.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAABJ0AAASdAHeZh94AAAB/ElEQVR42j1Sy27TQBTND/cH2HXVLhBlWxArhETVBRRFhYos6CMkhMR14sSJ09aPOFXid14znvFjzHEMXMmj8b1z7uucmqZpg8FgOp3meV7sLQgCRVHgV1XVMAwhBJxJkozH436/PxwOcS6XSzhrvV6v2WxalpXvLcuyKIra7bYsy51OZzabVRkRkmWp35e1iTYajTzPK8Hr9dr3fSRGgTRNS3yep3vDJReiSor6O8IJTTjnKIBoCcaHAMCExJ4bxDFDGL+cMRqGNIoYY3FMg3knmF3zlYLMxT+rCb4SGReFaNTlV4cX8i8T3qwo1rp+f3w8eH1C/Cjlnisf3X892JpnPMnRjCAOULXbO8l+dgCwzeD6amQ+lsMkaGyz0b5cWI0G2xFKQhqq4UIuEh9AGvOzy96zs64dvZd/qwDn0Sp60h883+V7Qwo0jIkopZwRwxWffpI7lWEkQvnbb3PLjTGzqJbcarVOT9/c3NxGUcgZDzZuvffxu/LZDZws4R3Ne9e4/PBDClYMlUQ18//psX0QO5/P06xciR3oh+cHL+svnHCBx/pidSU1W5OHmEEO4u/CwCp4gypwgraqCzCx3W0tR585JiG06t9zQ8u0LdO0bRu6wLOSZ0mSoCTTxDtS6QwZu92uoZtPj7quG2mawOm6rjJUJpMJpFYp7A/Z71e1znPRkgAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Persistent Volume Claim"
        title=""
        src="/ruminations/static/eaab8362c1f7de0601275b2453515a17/1591e/pvc.png"
        srcset="/ruminations/static/eaab8362c1f7de0601275b2453515a17/5243c/pvc.png 240w,
/ruminations/static/eaab8362c1f7de0601275b2453515a17/ab158/pvc.png 480w,
/ruminations/static/eaab8362c1f7de0601275b2453515a17/1591e/pvc.png 833w"
        sizes="(max-width: 833px) 100vw, 833px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></span>
<p class="css-z0logh">When Postgres is deployed as a container, if the container crashes for any reason and is restarted, all data stored will be wiped out. We can make use of <strong class="css-zezy6m">volumes</strong> to have a consistent file system that can be accessed by a database (such as Postgres) running on containers. In such cases, the database writes all data to volumes instead of container filesystem. It is not recommended to have multiple replicas of the same database container to access the same volume.</p>
<p class="css-z0logh">A <strong class="css-zezy6m">Volume</strong> in Kubernetes represents an object that allows a container to store data at the pod level, and it is <strong class="css-zezy6m">not</strong> equivalent to a Docker Volume. It is like a data storage pocket that is tied to a specific Pod. Volumes in a Pod can be accessed by any container inside the Pod. There is a limitation: if the Pod dies, then all the volumes tied to the Pod get erased as well, and they would be re-created by Deployment along with other objects. In Kubernetes, volumes are not really appropriate to store data for a database.</p>
<p class="css-z0logh">In addition to Volumes, there are 2 other types of data storage mechanisms in Kubernetes: <strong class="css-zezy6m">Persistent Volume Claim</strong> and <strong class="css-zezy6m">Persistent Volume</strong>. <strong class="css-zezy6m">Persistent Volumes</strong> are a kind of long term durable storage that are not tied to any specific Pods / containers. They are separate from the Pod, unaffected by any changes in the Pod.</p>
<p class="css-z0logh"><strong class="css-zezy6m">Persistent Volume Claims</strong> advertise / specify all available Persistent Volume options inside a cluster (like options displayed on a billboard). We can create config files which list down all these options that Persistent Volume Claims can showcase to all different objects inside the cluster. They are like an advertisement that display available Volume options.</p>
<p class="css-z0logh">When we request for a Persistent Volume considering the available Claims using Pod config files, Kubernetes consults the list of readily available Persistent Volumes (created ahead of time - statically provisioned), and provides the volume which can be attached to the Pod. Otherwise it creates Persistent Volumes on-the-fly (referred to as dynamically provisioned) based on request. Persistent Volume Claim Configs are attached to Pod config files. Kubernetes tries to find suitable Persistent Volume matching the config, or creates one if not found.</p>
<style data-emotion="css 17c4blx">.css-17c4blx{font-family:inherit;font-weight:700;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1rem;color:var(--theme-ui-colors-heading);margin-top:1rem;}@media screen and (min-width: 640px){.css-17c4blx{font-size:1.25rem;}}@media screen and (min-width: 768px){.css-17c4blx{font-size:1.25rem;}}@media screen and (min-width: 1024px){.css-17c4blx{font-size:1.5rem;}}</style><style data-emotion="css hspg4n">.css-hspg4n{font-family:inherit;font-weight:700;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1rem;color:var(--theme-ui-colors-heading);margin-top:1rem;font-family:inherit;font-weight:700;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1rem;color:var(--theme-ui-colors-heading);margin-top:1rem;}@media screen and (min-width: 640px){.css-hspg4n{font-size:1.25rem;}}@media screen and (min-width: 768px){.css-hspg4n{font-size:1.25rem;}}@media screen and (min-width: 1024px){.css-hspg4n{font-size:1.5rem;}}@media screen and (min-width: 640px){.css-hspg4n{font-size:1.25rem;}}@media screen and (min-width: 768px){.css-hspg4n{font-size:1.25rem;}}@media screen and (min-width: 1024px){.css-hspg4n{font-size:1.5rem;}}</style><h4 class="css-hspg4n">Sample Persistent Volume Claim Config</h4>
<div class="gatsby-highlight" data-language="yaml"><pre class="prism-code language-yaml" data-linenumber="false"><button type="button" name="copy code to clipboard" class="code-copy-button css-ce1lkk">Copy<span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="code-content language-yaml"><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">apiVersion</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> v1</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">kind</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> PersistentVolumeClaim</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">metadata</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">name</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> somedb</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">pvc</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">spec</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">accessModes</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain"> ReadWriteOnce</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">resources</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">requests</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">storage</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> 2Gi</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)"># storageClassName - can be used to explicitly mention storage class to be used</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">---</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)"># above config can be used in deployment file like this, which gets allocated by Kubernetes and assigned to specified container</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)"># ....</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">spec</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">volumes</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">name</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> postgres</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">storage</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">persistentVolumeClaim</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">        </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">claimName</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> somedb</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">pvc</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">containers</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">name</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> postgres</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">image</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> postgres</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">ports</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">        </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">containerPort</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token number" style="color:var(--theme-ui-colors-number-color)">5432</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">volumeMounts</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">        </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">name</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> postgres</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">storage</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">          </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">mountPath</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> /var/lib/postgresql/data </span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)"># designates where inside the container this storage should be made available</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">          </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">subPath</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> postgres </span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)"># specifies that any data inside the container that is stored in mountPath should be stored in a folder called &quot;postgres&quot; in the actual PVC</span></div></code></pre></div>
<p class="css-z0logh">There are 3 different access modes:</p>
<ol class="css-15vy6y4">
<li class="css-zezy6m"><strong class="css-zezy6m">ReadWriteOnce</strong> - can be read and written to by a single node</li>
<li class="css-zezy6m"><strong class="css-zezy6m">ReadOnlyMany</strong> - can be read by multiple nodes</li>
<li class="css-zezy6m"><strong class="css-zezy6m">ReadWriteMany</strong> - can be read and written to by multiple nodes at the same time</li>
</ol>
<p class="css-z0logh">Environment variables are defined in <code class="css-zezy6m">spec</code> using <code class="css-zezy6m">env</code> keyword. Each variable is defined using <code class="css-zezy6m">name</code> and <code class="css-zezy6m">value</code> attributes. Usually, the cluster IP service names of databases (defined in their metadata) would form the HOST variables in other services (example: PG_HOST). Environment variables should always be provided as strings.</p>
<h2 class="css-1h962gv">Secrets</h2>
<p class="css-z0logh">A Secret is a type of Kubernetes object which securely stores a piece of information in the cluster, such as a database password. To create a secret, use the following imperative command:</p>
<p class="css-z0logh"><code class="css-zezy6m">kubectl create secret generic &lt;secret-name&gt; --from-literal key=value</code>, where <code class="css-zezy6m">generic</code> represents secret type, <code class="css-zezy6m">--from-literal</code> represents that secret is provided in this command instead of a file. The other secret types are <code class="css-zezy6m">docker-registry</code> and <code class="css-zezy6m">tls</code>. Multiple key-value pairs can be added in this command. <code class="css-zezy6m">kubectl get secrets</code> lists all secrets created in a cluster.
Example: <code class="css-zezy6m">kubectl create secret generic postgrespassword --from-literal PGPASSWD=something</code>
This is used in config files like this:</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="prism-code language-yaml" data-linenumber="false"><button type="button" name="copy code to clipboard" class="code-copy-button css-ce1lkk">Copy<span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="code-content language-yaml"><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)"># ...</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">spec</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">containers</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">name</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> someserver</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">env</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">        </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">name</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> REDIS_HOST</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">          </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">value</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> redis</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">cluster</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">ip</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">service</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">        </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">name</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> PGPASSWORD</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">          </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">valueFrom</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">            </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">secretKeyRef</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">              </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">name</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> postgrespassword</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">              </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">key</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> PGPASSWD</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)"># ...</span></div></code></pre></div>
<h2 class="css-1h962gv">Kubernetes networking</h2>
<span><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 92.91666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAATABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAECAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAH3LmnRkIGgf//EABYQAQEBAAAAAAAAAAAAAAAAAEEQAP/aAAgBAQABBQJcxn//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAUEAEAAAAAAAAAAAAAAAAAAAAw/9oACAEBAAY/Ah//xAAbEAADAAIDAAAAAAAAAAAAAAAAAREQIUFRYf/aAAgBAQABPyGhPzi9DQmchpVaIf/aAAwDAQACAAMAAAAQtMd8/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxAf/8QAHRAAAgICAwEAAAAAAAAAAAAAAREAITFBEFFxof/aAAgBAQABPxBXSx9ji0IrjQlxsEBlRoYRgvzgiQs9QAMAT//Z'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Kubernetes networking"
        title=""
        src="/ruminations/static/3324860487787e2351d85af73e28b17a/18e3b/kubernetes-networking.jpg"
        srcset="/ruminations/static/3324860487787e2351d85af73e28b17a/46946/kubernetes-networking.jpg 240w,
/ruminations/static/3324860487787e2351d85af73e28b17a/55489/kubernetes-networking.jpg 480w,
/ruminations/static/3324860487787e2351d85af73e28b17a/18e3b/kubernetes-networking.jpg 960w,
/ruminations/static/3324860487787e2351d85af73e28b17a/5a523/kubernetes-networking.jpg 1200w"
        sizes="(max-width: 960px) 100vw, 960px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></span>
<p class="css-z0logh">Every Pod in a cluster gets its own unique cluster-wide IP address. This means we do not need to explicitly create links between Pods and we almost never need to deal with mapping container ports to host ports.
This creates a clean, backwards-compatible model where Pods can be treated much like VMs or physical hosts from the perspectives of port allocation, naming, service discovery, load balancing, application configuration, and migration.</p>
<p class="css-z0logh">Kubernetes imposes the following fundamental requirements on any networking implementation (barring any intentional network segmentation policies):</p>
<ul class="css-15vy6y4">
<li class="css-zezy6m">pods can communicate with all other pods on any other node without NAT</li>
<li class="css-zezy6m">agents on a node (e.g. system daemons, kubelet) can communicate with all pods on that node</li>
</ul>
<p class="css-z0logh">Note: For those platforms that support Pods running in the host network (e.g. Linux), when pods are attached to the host network of a node they can still communicate with all pods on all nodes without NAT.</p>
<p class="css-z0logh">Kubernetes IP addresses exist at the <code class="css-zezy6m">Pod</code> scope - containers within a <code class="css-zezy6m">Pod</code> share their network namespaces - including their IP address and MAC address. This means that containers within a <code class="css-zezy6m">Pod</code> can all reach each other&#x27;s ports on <code class="css-zezy6m">localhost</code>. This also means that containers within a <code class="css-zezy6m">Pod</code> must coordinate port usage, but this is no different from processes in a VM. This is called the &quot;IP-per-pod&quot; model.</p>
<p class="css-z0logh"><strong class="css-zezy6m">LoadBalancer</strong> - is another type of Kubernetes Service which is an old way of getting network traffic into a cluster. Ingress service is the new method of setting up incoming network into the cluster. A LoadBalancer allows access to one specific set of pods in our application only. Kubernetes also configures cloud provider-specific load balancer setups when this is initialized, and connects them to the cluster.</p>
<p class="css-z0logh"><strong class="css-zezy6m">Ingress</strong> - a Kubernetes Service which exposes a set of services to the outside world and allow users to access all the pods configured in the cluster. There are several different implementations of Ingress. Nginx Ingress is one of them, which is a community-led project (<style data-emotion="css 1d2wwf6">.css-1d2wwf6{color:var(--theme-ui-colors-primary);-webkit-text-decoration:none;text-decoration:none;}.css-1d2wwf6:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><style data-emotion="css 1diwg7s">.css-1diwg7s{color:var(--theme-ui-colors-primary);-webkit-text-decoration:none;text-decoration:none;color:var(--theme-ui-colors-primary);-webkit-text-decoration:none;text-decoration:none;}.css-1diwg7s:hover{-webkit-text-decoration:underline;text-decoration:underline;}.css-1diwg7s:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a href="https://github.com/kubernetes/ingress-nginx" class="css-1diwg7s"><strong class="css-zezy6m">ingress-nginx</strong></a>) and frequently used. Another implementation available is <a href="https://github.com/nginxinc/kubernetes-ingress" class="css-1diwg7s"><strong class="css-zezy6m">kubernetes-ingress</strong></a>, which is led by the company Nginx. Setup of ingress-nginx varies depending on the environment (local / cloud provider). The Ingress config files describe a set of routing rules to take incoming traffic and send it to the correct services inside the cluster. When these files are provided to kubectl, it creates an ingress controller, which creates a pod running Ngnix containing a particular set of rules based on the configuration provided. The ingress controller watches for changes to ingress config files and updates the pod that handles incoming traffic. In the case of <code class="css-zezy6m">ingress-nginx</code>, both of these (ingress-controller and pod handling incoming traffic) are the same.</p>
<p class="css-z0logh">In Google Cloud, the setup consists of a <strong class="css-zezy6m">cloud-native load balancer</strong> which forwards incoming traffic to a LoadBalancer service connected to a Deployment based on Ingress Config file (which deploys <code class="css-zezy6m">nginx-controller/nginx</code> pod based on config rules). The Nginx pod is responsible for routing traffic to appropriate services inside the cluster. Also, another Deployment is set up, called <strong class="css-zezy6m">default backend</strong> (Pod with ClusterIP service). The default backend is used for a series of healthchecks to make sure the cluster is up and running. Ideally the default backend would be replaced with backend server (Express, FastAPI etc.).</p>
<p class="css-z0logh">The <code class="css-zezy6m">nginx-controller/nginx</code> image is used for the pod connected to LoadBalancer service instead of default nginx image. This is because the image has additional configuration to operate inside Kubernetes clusters, like routing incoming traffic to the pods directly instead of ClusterIP services to allow for features like sticky sessions etc. The ingress service automatically listens on ports 80 and 443. The Nginx configuration by default chooses HTTPS connection using a dummy certificate.</p>
<p class="css-z0logh">Sample Ingress config:</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="prism-code language-yaml" data-linenumber="false"><button type="button" name="copy code to clipboard" class="code-copy-button css-ce1lkk">Copy<span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="code-content language-yaml"><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">apiVersion</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> extensions/v1beta1</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">kind</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> Ingress</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">metadata</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">name</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">service</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">annotations</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)"># they are additional configuration options that specify higher level setup around the created ingress object.</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">kubernetes.io/ingress.class</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> nginx </span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)"># creates ingress-controller based on nginx project</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">nginx.ingress.kubernetes.io/rewrite-target</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> / </span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)"># remove additional route urls after / before sending the request to pods. Example: it rewrites /api to /</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">spec</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">rules</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">http</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">        </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">paths</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)"># requests should be routed to the following paths</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">          </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">path</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> /</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">            </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">backend</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">              </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">serviceName</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> client</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">cluster</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">ip</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">service</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">              </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">servicePort</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token number" style="color:var(--theme-ui-colors-number-color)">3000</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">          </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">path</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> /api/</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">            </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">backend</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">              </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">serviceName</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> server</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">cluster</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">ip</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">service</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">              </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">servicePort</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token number" style="color:var(--theme-ui-colors-number-color)">5000</span></div></code></pre></div>
<style data-emotion="css 1loxung">.css-1loxung{border-left-color:var(--theme-ui-colors-primary);border-left-style:solid;border-left-width:4px;margin-left:0;margin-right:0;padding-left:2rem;}.css-1loxung p{font-style:italic;}</style><style data-emotion="css m9jm23">.css-m9jm23{border-left-color:var(--theme-ui-colors-primary);border-left-style:solid;border-left-width:4px;margin-left:0;margin-right:0;padding-left:2rem;border-left-color:var(--theme-ui-colors-primary);border-left-style:solid;border-left-width:4px;margin-left:0;margin-right:0;padding-left:2rem;}.css-m9jm23 p{font-style:italic;}.css-m9jm23 p{font-style:italic;}</style><blockquote class="css-m9jm23">
<h3 class="css-ns8t27">Why Google Cloud is preferred for Kubernetes than AWS</h3>
<p class="css-z0logh">Google created Kubernetes - the open source project and financially supported it for the first few years of its existence. AWS got Kubernetes support in early 2018. Google Cloud offers &quot;cloud console&quot; - a terminal connected to all resources hosted there which also provides access to a kubectl-like tool connected to production Kubernetes instance. Documentation for Kubernetes in Google Cloud is much better compared to AWS.</p>
</blockquote>
<h4 class="css-hspg4n">Things to note in GKE console</h4>
<p class="css-z0logh">Node configuration (node pool) displayed in the console describes specifications of each different virtual machine that will be added to Kubernetes Cluster as a Node. The default storage class is standard with a provisioner of <code class="css-zezy6m">kubernetes.io/gce-pd</code>. GKE enables RBAC by default. Role Based Access Control (RBAC) limits who can access and modify objects in Kubernetes cluster. RBAC terminologies in a Kubernetes Cluster:</p>
<ul class="css-15vy6y4">
<li class="css-zezy6m"><strong class="css-zezy6m">User Accounts</strong> identify a person administering the Kubernetes cluster</li>
<li class="css-zezy6m"><strong class="css-zezy6m">Service Accounts</strong> identify a pod administering the cluster</li>
<li class="css-zezy6m"><strong class="css-zezy6m">ClusterRoleBinding</strong> authorizes an account (user / service) to do a certain set of actions across the entire cluster</li>
<li class="css-zezy6m"><strong class="css-zezy6m">RoleBinding</strong> authorizes an account to do a certain set of actions in a &quot;single namespace&quot;</li>
</ul>
<h2 class="css-1h962gv">Helm and cert-manager</h2>
<span><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 51.25000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABoUlEQVR42n2R2W7UQBBF55P5HP4CgZCQIngEAZMojIJmHK/jZeK2u+3e3LZ7ddoeEaQ8pEq6T3Xq1lXtCoZTSjJGYtzfpfEhz76Gadr1y7I457xa62Kg0tZmrbwLwO2pOUTtt3v46SfdnT2MadzRivGS0gtjD20LBr7BXhZjXQR0UKl9OObtXEBZIXmq5H0mdxntg0b8BYawkVPCKa0oQZNY4ZVdlHFlZz58Z+/eo7wepwHLaUBMp43aVQwnHYF8yDltBkYEL2jfz/9h75w0Zh9NH38Mp3Ys8QyJOkMVA73bhpzVCoiBz5Mx5sq8lIfDWqfQlcj8yoc/xRRc9GNt03aD19ukRJxzITx89XxZobfMEXDHUv5O6eHMg4sKgUubDZZKS6mI1spaa4yXV84PpYpqlTVzgGTemQrpBOjkCt+G5ed9oLTGGFutn4Q4jxOZZ858cyjVTTbenMov+6OYleBssQYyE9ZqhTETT8gbe3/plU1zJ6btw9a/Whn7CExwEccCN0S3WCKqcqjj5l/mN8pv8PEy6HLoEmDixsSr2hyZZ/+HM1qq2z0sAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Helm"
        title=""
        src="/ruminations/static/75e5e6e597276ad1fa719b99b22c266e/7d769/helm.png"
        srcset="/ruminations/static/75e5e6e597276ad1fa719b99b22c266e/5243c/helm.png 240w,
/ruminations/static/75e5e6e597276ad1fa719b99b22c266e/ab158/helm.png 480w,
/ruminations/static/75e5e6e597276ad1fa719b99b22c266e/7d769/helm.png 960w,
/ruminations/static/75e5e6e597276ad1fa719b99b22c266e/4af54/helm.png 1400w"
        sizes="(max-width: 960px) 100vw, 960px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></span>
<p class="css-z0logh">Helm is a program that we can use to install and administer third-party software inside the Kubernetes cluster. When Helm is installed, <strong class="css-zezy6m">Helm Client (CLI tool)</strong> and <strong class="css-zezy6m">Tiller Server</strong> are installed as part of it. <strong class="css-zezy6m">Tiller</strong> is a server pod running inside the Kubernetes cluster, which is responsible for modifying the cluster to install additional programs in it. After installing tiller and assigning proper permissions, initialize it by using <code class="css-zezy6m">helm init --service-account tiller upgrade</code>.</p>
<ul class="css-15vy6y4">
<li class="css-zezy6m"><code class="css-zezy6m">kubectl create serviceaccount --namespace kube-system tiller</code> - creates a new service account named <strong class="css-zezy6m">tiller</strong> in the kube-system namespace</li>
<li class="css-zezy6m"><code class="css-zezy6m">kubectl create clusterrolebinding tiller-cluster-rule --clusterrole=cluster-admin --serviceaccount=kube-system:tiller</code> - creates a new clusterrolebinding with the (pre-defined) role <code class="css-zezy6m">cluster-admin</code> and assign it to service account <strong class="css-zezy6m">tiller</strong></li>
</ul>
<p class="css-z0logh"><strong class="css-zezy6m">cert-manager</strong> adds certificates and certificate issuers as resource types in Kubernetes clusters, and simplifies the process of obtaining, renewing and using those certificates. It can issue certificates from a variety of supported sources, including Let&#x27;s Encrypt, HashiCorp Vault, and Venafi as well as private PKI. It will ensure certificates are valid and up to date, and attempt to renew certificates at a configured time before expiry. The ingress service should be updated once the certificates are retrieved.</p>
<p class="css-z0logh">cert-manager is installed via Helm, which installs certain Kubernetes objects via a Deployment, creating certain Pods, Service Account and Cluster Role Bindings. In addition to this, the following objects need to be installed:</p>
<ul class="css-15vy6y4">
<li class="css-zezy6m"><strong class="css-zezy6m">Certificate</strong> - object describing details about the certificate that should be obtained. It is linked to a Secret once the certificate is retrieved.</li>
<li class="css-zezy6m"><strong class="css-zezy6m">Issuer</strong> - object telling cert-manager where to get the certificate from (a certificate authority)</li>
</ul>
<p class="css-z0logh">Sample config file for Issuer:</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="prism-code language-yaml" data-linenumber="false"><button type="button" name="copy code to clipboard" class="code-copy-button css-ce1lkk">Copy<span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="code-content language-yaml"><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">apiVersion</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> certmanager.k8s.io/v1alpha1</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">kind</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> ClusterIssuer</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">metadata</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">name</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> letsencrypt</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">prod </span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)"># can be named after the source of the issuer</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">spec</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">acme</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">server</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain">//acme</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">v02.api.letsencrypt.org/directory </span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)"># link to the api to setup issuer communication</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">email</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&quot;abc@abc.com&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">privateKeySecretRef</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">name</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> letsencrypt</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">prod</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">http01</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token plain"> </span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)"># basically specifies that we want to use http process for getting a certificate</span></div></code></pre></div>
<hr class="css-1ve732v"/>
<p class="css-z0logh">Sample config file for Certificate:</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="prism-code language-yaml" data-linenumber="false"><button type="button" name="copy code to clipboard" class="code-copy-button css-ce1lkk">Copy<span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="code-content language-yaml"><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">apiVersion</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> certmanager.k8s.io/v1alpha1</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">kind</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> Certificate</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">metadata</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">name</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> k8s</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">sample</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">com</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">tls</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">spec</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">secretName</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> k8s</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">sample</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">com </span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)"># can be anything; specifies where the certificate should be stored after it is obtained by cert-manager</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">issuerRef</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)"># reference to the Issuer that is already set up</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">name</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> letsencrypt</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">prod</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">kind</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> ClusterIssuer</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">commonName</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> k8s</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">sample.com </span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)"># domain name</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">dnsNames</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)"># list of all different domains that should be associated with the certificate</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain"> k8s</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">sample.com</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain"> www.k8s</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">sample.com</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">acme</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">config</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">http01</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">          </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">ingressClass</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> nginx</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">        </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">domains</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)"># list of all domains that should go through verification process</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">          </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain"> k8s</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">sample.com</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">          </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain"> www.k8s</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">sample.com</span></div></code></pre></div>
<h3 class="css-ns8t27">Skaffold</h3>
<p class="css-z0logh">Skaffold is a command-line tool completely separate from Kubernetes which facilitates local development. It watches local directory for changes and update that in Kubernetes cluster using one of the following methods:</p>
<ol class="css-15vy6y4">
<li class="css-zezy6m">Rebuilding client image from scratch and then updating Kubernetes cluster</li>
<li class="css-zezy6m">Injecting updated files into the Client pod and rely on the application to automatically update itself</li>
</ol>
<p class="css-z0logh">Sample Skaffold config file:</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="prism-code language-yaml" data-linenumber="false"><button type="button" name="copy code to clipboard" class="code-copy-button css-ce1lkk">Copy<span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="code-content language-yaml"><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">apiVersion</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> skaffold/v1beta2</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">kind</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> Config</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">build</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)"># lists out all different deployments that should be managed by Skaffold</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">local</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">push</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:var(--theme-ui-colors-boolean-color)">false</span><span class="token plain"> </span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)"># by default Skaffold pushes built image to DockerHub, which can be disabled like this</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">artifacts</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">image</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> someuser/multi</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">client</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">context</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> client </span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)"># folder where the Docker image will be built</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">docker</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">        </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">dockerfile</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> Dockerfile.dev</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">sync</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)"># series of matching file paths that informs Skaffold to watch for changes and sync them without rebuilding the image</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">        </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">&quot;**/*.js&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> .</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">        </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">&quot;**/*.css&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> .</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">        </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">&quot;**/*.html&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> .</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">image</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> someuser/multi</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">server</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">context</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> server</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">docker</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">        </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">dockerfile</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> Dockerfile.dev</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">sync</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">        </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">&quot;**/*.js&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> .</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">image</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> someuser/multi</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">worker</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">context</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> worker</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">docker</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">        </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">dockerfile</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> Dockerfile.dev</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">sync</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">        </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">&quot;**/*.js&quot;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> .</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">deploy</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">kubectl</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token key atrule" style="color:var(--theme-ui-colors-atrule-color)">manifests</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">:</span><span class="token plain"> </span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)"># all Kubernetes config files that should be managed by Skaffold</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain"> k8s/client</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">deployment.yaml</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain"> k8s/server</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">deployment.yaml</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain"> k8s/worker</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">deployment.yaml</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain"> k8s/server</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">cluster</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">ip</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">service.yaml</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">      </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain"> k8s/client</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">cluster</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">ip</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">-</span><span class="token plain">service.yaml</span></div></code></pre></div>
<p class="css-z0logh">Skaffold falls back to 1st method (rebuilding image from scratch) whenever any file which isn&#x27;t specified in the config gets changed. It can be started by using <code class="css-zezy6m">skaffold dev</code>. It automatically creates and deletes all Kubernetes resources specified in the config file when it is started and shutdown. It can also handle Kubernetes resources in its configuration that are already up and running.</p>
<h2 class="css-1h962gv">Credits &amp; Attributions:</h2>
<ul class="css-15vy6y4">
<li class="css-zezy6m"><a href="https://kubernetes.io/docs/home/" class="css-1diwg7s">Official Kubernetes Documentation</a></li>
<li class="css-zezy6m"><a href="https://cert-manager.io/docs/" class="css-1diwg7s">cert-manager Documentation</a></li>
<li class="css-zezy6m"><a href="https://skaffold.dev/docs/" class="css-1diwg7s">Skaffold Documentation</a></li>
<li class="css-zezy6m"><a href="https://www.udemy.com/course/docker-and-kubernetes-the-complete-guide/" class="css-1diwg7s">Docker and Kubernetes: The Complete Guide by Stephen Grider</a></li>
</ul></section></main><style data-emotion="css y7pay1">.css-y7pay1{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin-top:8rem;color:var(--theme-ui-colors-secondary);-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;border-top-style:solid;border-top-width:1px;border-top-color:var(--theme-ui-colors-divide);padding-top:1rem;}.css-y7pay1 a{color:var(--theme-ui-colors-secondary);-webkit-text-decoration:none;text-decoration:none;}.css-y7pay1 a:hover{color:var(--theme-ui-colors-heading);-webkit-text-decoration:underline;text-decoration:underline;}.css-y7pay1 a:focus{color:var(--theme-ui-colors-heading);}@media screen and (min-width: 640px){.css-y7pay1{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}@media screen and (min-width: 768px){.css-y7pay1{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}}</style><footer class="css-y7pay1"><div>© <!-- -->2025<!-- --> by <!-- -->Ruminations<!-- -->. All rights reserved.</div><div><a aria-label="Link to the theme&#x27;s GitHub repository" href="https://github.com/LekoArts/gatsby-themes/tree/main/themes/gatsby-theme-minimal-blog" class="css-aizfxq">Theme</a> <!-- -->by<!-- --> <a aria-label="Link to the theme author&#x27;s website" href="https://www.lekoarts.de?utm_source=minimal-blog&amp;utm_medium=Theme" class="css-aizfxq">LekoArts</a></div></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/kubernetes-reference";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-2e695f305fed15f282e4.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-blog-query-tsx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-blog-query-tsx-6e74e1fd9ef0bd8085ce.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-homepage-query-tsx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-homepage-query-tsx-a587fb433378308b94f4.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-page-query-tsx-content-file-path-content-pages-about-index-mdx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-page-query-tsx-content-file-path-content-pages-about-index-mdx-141fc0829306fcf1b604.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-all-bookmarks-index-mdx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-all-bookmarks-index-mdx-fdfba03312ec30c298c3.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-azure-fundamentals-index-mdx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-azure-fundamentals-index-mdx-a2d5499bbffc78a86b5f.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-best-of-sherlock-holmes-index-mdx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-best-of-sherlock-holmes-index-mdx-17c10d38d7256104595e.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-database-concepts-index-mdx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-database-concepts-index-mdx-397552b8c46ab0d6ce73.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-design-patterns-index-mdx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-design-patterns-index-mdx-491326e270c2aa2e2f64.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-docker-guide-index-mdx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-docker-guide-index-mdx-06f4bb7f5fb033067c76.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-feynman-technique-index-mdx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-feynman-technique-index-mdx-5208c0955e119ce11024.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-git-branching-strategies-index-mdx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-git-branching-strategies-index-mdx-f3dd1b2409c6048c9973.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-git-stuff-index-mdx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-git-stuff-index-mdx-88de366bb88df35fc1e3.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-golang-index-mdx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-golang-index-mdx-9d37223393b3ae8e0ed2.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-graphql-basics-index-mdx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-graphql-basics-index-mdx-64fc132fc56c68d21b9c.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-kubernetes-reference-index-mdx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-kubernetes-reference-index-mdx-b3c684f147c6d40d7c78.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-meeting-people-index-mdx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-meeting-people-index-mdx-cac84e87d1da5681ddec.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-motivational-quotes-index-mdx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-motivational-quotes-index-mdx-bce7b697f867201d7f29.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-nextjs-index-mdx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-nextjs-index-mdx-2f8bf07ef1efc04d3a3b.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-no-distraction-index-mdx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-no-distraction-index-mdx-e5ce59a05fc51cbd458c.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-nodejs-mongo-rest-api-index-mdx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-nodejs-mongo-rest-api-index-mdx-8bae368185bb42ede576.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-procrastination-index-mdx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-procrastination-index-mdx-988cf4e5a6d8c9e0d0a5.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-python-opencv-index-mdx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-python-opencv-index-mdx-b1a9fbb804807bac7175.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-react-concepts-part-1-index-mdx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-react-concepts-part-1-index-mdx-ab209a78c68f05387b48.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-react-concepts-part-2-index-mdx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-react-concepts-part-2-index-mdx-d301f16b034fe6ab8033.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-self-help-cheatsheet-index-mdx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-self-help-cheatsheet-index-mdx-cda4a7683d86c963272f.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-small-talk-cheatsheet-index-mdx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-small-talk-cheatsheet-index-mdx-50a48dfd94a92df01636.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-terraform-index-mdx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-terraform-index-mdx-d56926ee80d9be63bbcf.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-things-to-keep-in-mind-index-mdx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-things-to-keep-in-mind-index-mdx-40f9357fe3f4b759eee5.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-typescript-index-mdx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-typescript-index-mdx-9dea9f8b84c633ef7755.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-tag-query-tsx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-tag-query-tsx-debd188acb04595d8d0f.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-tags-query-tsx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-tags-query-tsx-e83277b05893d1ba8d5c.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="f93092e871d9f46a5165";</script><script src="/ruminations/webpack-runtime-e9de991c73cd99279b77.js" async></script><script src="/ruminations/framework-58d7eb1a8add9e25bb14.js" async></script><script src="/ruminations/app-2e695f305fed15f282e4.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>